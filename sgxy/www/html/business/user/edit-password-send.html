<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0,maximum-scale=0.65 , user-scalable=0">
<base href="../../../"/>
  <link rel="stylesheet" href="css/common/jquery.mobile-1.4.5.min.css"/>
    <link rel="stylesheet" type="text/css" href="css/common/common.css" />
    <link rel="stylesheet" href="css/style2.css"/>
<style>
    .add-sug-main {
        padding: 0;
        margin: 10px 0;
    }
    .add-sug-main div {
        padding: 0 7px;
        border: 0;
        background-color: #ffffff;
        line-height: 86px;
    }
    .add-sug-main input {
        border: 0!important;
        height: 84px;
    }

    :focus {
        outline:none;
    }
    .add-sug-main div:first-child {
        border-bottom: 1px solid #bbbbbb;
    }
    .ok-submit {
        display: inline-block;
        text-align: center;
        width: 100%;
        margin-top: 100px;
    }
    .ok-submit a {
        background: #FF5555;
        width: 80%;
        display: inline-block;
        color: #ffffff!important;
        padding: 25px 0;
        border-radius: 10px;
        font-size: 24px;
    }
    .send-code {
        color: #ff5555;
        float: right;
        margin-right:10px ;
    }
</style>
</head>
<body>
<div data-role="page" class="jqm-main" data-quicklinks="true">
    <section data-role="header" data-theme="b" class="my-header" id="my-header">
        <a href="javascript:history.back();" data-rel="back" data-role="none" class="my-header-back-btn"></a>
        <h2>修改密码</h2>
    </section>
<section data-role="content" class="add-sug-main">
    <div>手机号：<input  type="text" name="mobile" id="mobile" placeholder="请输入你的手机号码" data-role="none" ></div>
    <div> 验证码：<input  type="text" name="verifyCode" id="image-code" placeholder="请输入验证码" data-role="none" >
    <a href="#" class="send-code" onclick="getValidCode()" id="sendCode" style="color: #ff5555;">获取验证码</a>
    </div>
</section>
    <section class="ok-submit">
        <div>
            <a href="#" target="_top" onclick="nextStep()">下一步</a>
        </div>
    </section>
</div>

</body>
    
  <script src="js/common/jquery.min.js"></script>
 <script>
    $(document).bind('mobileinit',function(){
        $.mobile.changePage.defaults.changeHash = false;
        $.mobile.hashListeningEnabled = false;
        $.mobile.pushStateEnabled = false;
    });
    //获取验证
    function  getValidCode(){
        if(Util.string.isEmpty($("#mobile").val())){
            Util.msg.show("sgId","请输入正确的手机号码");
            return;
        }
         var url = Util.common.baseUrl + "/mobile/user/verifyPhone.do";
         var param = {"phoneCode": $("#mobile").val()};
         Util.common.executeAjaxCallback(url, param, function (data) {
             if (data.success == true) {
                 // Util.msg.show("msgIdMessage","验证码已发送到您手机");
                 var leftTime = data.timeout;
                 var timeTasker = setInterval(function () {
                     leftTime -= 1000;
                    $("#sendCode").css("color",'#bbbbbb');
                     $("#sendCode").html("请稍候("+(leftTime/1000)+"s)");
                     $("#sendCode").removeAttr("onclick");
                     if (leftTime < 0) {
                         $("#sendCode").css("color",'ff5555');
                         $("#sendCode").html("获取验证码");
                         $("#sendCode").attr("onclick","getValidCode()");
                         clearInterval(timeTasker);
                     }
                 }, 1000);
             }
         });
     }
     //下一步
     function nextStep(){
         document.location.href = "html/business/user/edit-password.html?mobile="+$("input[name=mobile]").val()+"&verifyCode="+$("input[name=verifyCode]").val();
     }
</script> 
<script src="js/common/jquery.mobile-1.4.5.min.js" ></script>
<script src="js/common/common.js"></script>
</html>