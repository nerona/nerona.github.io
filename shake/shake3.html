<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>摇一摇</title>
    <meta name="format-detection" content="telephone=no" />
    <meta name="format-detection" content="email=no" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <script type='text/javascript' src='zepto.min.js' charset='utf-8'></script>
    <link rel="stylesheet" href="style.css">
    <script>
        (function () {
            document.addEventListener('DOMContentLoaded', function () {
                var html = document.documentElement;
                var windowWidth = html.clientWidth;
                if(windowWidth < 750) {
                    html.style.fontSize = windowWidth / 7.5 + 'px';
                } else {
                    html.style.fontSize = '80px';
                }

            }, false);
        })();
    </script>
</head>
<body>
<div class="container">
    <div class="banner">
        <span class="price">奖品:价值5800元精品挂葫芦</span>
    </div>
    <!--  -->
    <div class="info">
        <img class="header" src="header.png">
        <!--  -->
        <div></div>
        <!--  -->
        <div class="text">童话光年，继续加油！</div>
        <div class="text">您已摇<span id="all">154</span>次，排名<span id="range">54</span>名</div>
    </div>
    <!--  -->
    <div class="circle">
        <div class="hand"></div>
    </div>
</div>

<script type="text/javascript" src="shake.js"></script>
<script type="text/javascript">
    window.onload = function() {
        var count = 0;
        var myShakeEvent = new Shake({
            threshold: 12,
            timeout: 150
        });
        //摇动事件回调
        function shakeEventDidOccur () {
            $('.hand').addClass('shake');
            count++;
            document.getElementById('all').innerHTML = count;
        }

        //计时
        var left = 20;

        //摇一摇开关
        var flag = true;
        if(flag) {
            myShakeEvent.start();

            window.addEventListener('shake', shakeEventDidOccur, false);

            var timer = setInterval(function(){
                if(left > 0) {
                    left--;
                } else {
                    clearInterval(timer);
                    myShakeEvent.stop();
                }
            }, 1000);
        }
    };
</script>
</body>
</html>