{"version":3,"sources":["iscroll.js"],"names":[],"mappings":"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","file":"iscroll-compiled.js","sourcesContent":["/*!\r\n * iScroll v4.2.5 ~ Copyright (c) 2012 Matteo Spinelli, http://cubiq.org\r\n * Released under MIT license, http://cubiq.org/license\r\n */\r\n(function(window, doc){\r\nvar m = Math,\r\n\tdummyStyle = doc.createElement('div').style,\r\n\tvendor = (function () {\r\n\t\tvar vendors = 't,webkitT,MozT,msT,OT'.split(','),\r\n\t\t\tt,\r\n\t\t\ti = 0,\r\n\t\t\tl = vendors.length;\r\n\r\n\t\tfor ( ; i < l; i++ ) {\r\n\t\t\tt = vendors[i] + 'ransform';\r\n\t\t\tif ( t in dummyStyle ) {\r\n\t\t\t\treturn vendors[i].substr(0, vendors[i].length - 1);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t})(),\r\n\tcssVendor = vendor ? '-' + vendor.toLowerCase() + '-' : '',\r\n\r\n\t// Style properties\r\n\ttransform = prefixStyle('transform'),\r\n\ttransitionProperty = prefixStyle('transitionProperty'),\r\n\ttransitionDuration = prefixStyle('transitionDuration'),\r\n\ttransformOrigin = prefixStyle('transformOrigin'),\r\n\ttransitionTimingFunction = prefixStyle('transitionTimingFunction'),\r\n\ttransitionDelay = prefixStyle('transitionDelay'),\r\n\r\n    // Browser capabilities\r\n\tisAndroid = (/android/gi).test(navigator.appVersion),\r\n\tisIDevice = (/iphone|ipad/gi).test(navigator.appVersion),\r\n\tisTouchPad = (/hp-tablet/gi).test(navigator.appVersion),\r\n\r\n    has3d = prefixStyle('perspective') in dummyStyle,\r\n    hasTouch = 'ontouchstart' in window && !isTouchPad,\r\n    hasTransform = vendor !== false,\r\n    hasTransitionEnd = prefixStyle('transition') in dummyStyle,\r\n\r\n\tRESIZE_EV = 'onorientationchange' in window ? 'orientationchange' : 'resize',\r\n\tSTART_EV = hasTouch ? 'touchstart' : 'mousedown',\r\n\tMOVE_EV = hasTouch ? 'touchmove' : 'mousemove',\r\n\tEND_EV = hasTouch ? 'touchend' : 'mouseup',\r\n\tCANCEL_EV = hasTouch ? 'touchcancel' : 'mouseup',\r\n\tTRNEND_EV = (function () {\r\n\t\tif ( vendor === false ) return false;\r\n\r\n\t\tvar transitionEnd = {\r\n\t\t\t\t''\t\t\t: 'transitionend',\r\n\t\t\t\t'webkit'\t: 'webkitTransitionEnd',\r\n\t\t\t\t'Moz'\t\t: 'transitionend',\r\n\t\t\t\t'O'\t\t\t: 'otransitionend',\r\n\t\t\t\t'ms'\t\t: 'MSTransitionEnd'\r\n\t\t\t};\r\n\r\n\t\treturn transitionEnd[vendor];\r\n\t})(),\r\n\r\n\tnextFrame = (function() {\r\n\t\treturn window.requestAnimationFrame ||\r\n\t\t\twindow.webkitRequestAnimationFrame ||\r\n\t\t\twindow.mozRequestAnimationFrame ||\r\n\t\t\twindow.oRequestAnimationFrame ||\r\n\t\t\twindow.msRequestAnimationFrame ||\r\n\t\t\tfunction(callback) { return setTimeout(callback, 1); };\r\n\t})(),\r\n\tcancelFrame = (function () {\r\n\t\treturn window.cancelRequestAnimationFrame ||\r\n\t\t\twindow.webkitCancelAnimationFrame ||\r\n\t\t\twindow.webkitCancelRequestAnimationFrame ||\r\n\t\t\twindow.mozCancelRequestAnimationFrame ||\r\n\t\t\twindow.oCancelRequestAnimationFrame ||\r\n\t\t\twindow.msCancelRequestAnimationFrame ||\r\n\t\t\tclearTimeout;\r\n\t})(),\r\n\r\n\t// Helpers\r\n\ttranslateZ = has3d ? ' translateZ(0)' : '',\r\n\r\n\t// Constructor\r\n\tiScroll = function (el, options) {\r\n\t\tvar that = this,\r\n\t\t\ti;\r\n\r\n\t\tthat.wrapper = typeof el == 'object' ? el : doc.getElementById(el);\r\n\t\tthat.wrapper.style.overflow = 'hidden';\r\n\t\tthat.scroller = that.wrapper.children[0];\r\n\r\n\t\t// Default options\r\n\t\tthat.options = {\r\n\t\t\thScroll: true,\r\n\t\t\tvScroll: true,\r\n\t\t\tx: 0,\r\n\t\t\ty: 0,\r\n\t\t\tbounce: true,\r\n\t\t\tbounceLock: false,\r\n\t\t\tmomentum: true,\r\n\t\t\tlockDirection: true,\r\n\t\t\tuseTransform: true,\r\n\t\t\tuseTransition: false,\r\n\t\t\ttopOffset: 0,\r\n\t\t\tcheckDOMChanges: false,\t\t// Experimental\r\n\t\t\thandleClick: true,\r\n\r\n\t\t\t// Scrollbar\r\n\t\t\thScrollbar: true,\r\n\t\t\tvScrollbar: true,\r\n\t\t\tfixedScrollbar: isAndroid,\r\n\t\t\thideScrollbar: isIDevice,\r\n\t\t\tfadeScrollbar: isIDevice && has3d,\r\n\t\t\tscrollbarClass: '',\r\n\r\n\t\t\t// Zoom\r\n\t\t\tzoom: false,\r\n\t\t\tzoomMin: 1,\r\n\t\t\tzoomMax: 4,\r\n\t\t\tdoubleTapZoom: 2,\r\n\t\t\twheelAction: 'scroll',\r\n\r\n\t\t\t// Snap\r\n\t\t\tsnap: false,\r\n\t\t\tsnapThreshold: 1,\r\n\r\n\t\t\t// Events\r\n\t\t\tonRefresh: null,\r\n\t\t\tonBeforeScrollStart: function (e) { e.preventDefault(); },\r\n\t\t\tonScrollStart: null,\r\n\t\t\tonBeforeScrollMove: null,\r\n\t\t\tonScrollMove: null,\r\n\t\t\tonBeforeScrollEnd: null,\r\n\t\t\tonScrollEnd: null,\r\n\t\t\tonTouchEnd: null,\r\n\t\t\tonDestroy: null,\r\n\t\t\tonZoomStart: null,\r\n\t\t\tonZoom: null,\r\n\t\t\tonZoomEnd: null\r\n\t\t};\r\n\r\n\t\t// User defined options\r\n\t\tfor (i in options) that.options[i] = options[i];\r\n\t\t\r\n\t\t// Set starting position\r\n\t\tthat.x = that.options.x;\r\n\t\tthat.y = that.options.y;\r\n\r\n\t\t// Normalize options\r\n\t\tthat.options.useTransform = hasTransform && that.options.useTransform;\r\n\t\tthat.options.hScrollbar = that.options.hScroll && that.options.hScrollbar;\r\n\t\tthat.options.vScrollbar = that.options.vScroll && that.options.vScrollbar;\r\n\t\tthat.options.zoom = that.options.useTransform && that.options.zoom;\r\n\t\tthat.options.useTransition = hasTransitionEnd && that.options.useTransition;\r\n\r\n\t\t// Helpers FIX ANDROID BUG!\r\n\t\t// translate3d and scale doesn't work together!\r\n\t\t// Ignoring 3d ONLY WHEN YOU SET that.options.zoom\r\n\t\tif ( that.options.zoom && isAndroid ){\r\n\t\t\ttranslateZ = '';\r\n\t\t}\r\n\t\t\r\n\t\t// Set some default styles\r\n\t\tthat.scroller.style[transitionProperty] = that.options.useTransform ? cssVendor + 'transform' : 'top left';\r\n\t\tthat.scroller.style[transitionDuration] = '0';\r\n\t\tthat.scroller.style[transformOrigin] = '0 0';\r\n\t\tif (that.options.useTransition) that.scroller.style[transitionTimingFunction] = 'cubic-bezier(0.33,0.66,0.66,1)';\r\n\t\t\r\n\t\tif (that.options.useTransform) that.scroller.style[transform] = 'translate(' + that.x + 'px,' + that.y + 'px)' + translateZ;\r\n\t\telse that.scroller.style.cssText += ';position:absolute;top:' + that.y + 'px;left:' + that.x + 'px';\r\n\r\n\t\tif (that.options.useTransition) that.options.fixedScrollbar = true;\r\n\r\n\t\tthat.refresh();\r\n\r\n\t\tthat._bind(RESIZE_EV, window);\r\n\t\tthat._bind(START_EV);\r\n\t\tif (!hasTouch) {\r\n\t\t\tif (that.options.wheelAction != 'none') {\r\n\t\t\t\tthat._bind('DOMMouseScroll');\r\n\t\t\t\tthat._bind('mousewheel');\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (that.options.checkDOMChanges) that.checkDOMTime = setInterval(function () {\r\n\t\t\tthat._checkDOMChanges();\r\n\t\t}, 500);\r\n\t};\r\n\r\n// Prototype\r\niScroll.prototype = {\r\n\tenabled: true,\r\n\tx: 0,\r\n\ty: 0,\r\n\tsteps: [],\r\n\tscale: 1,\r\n\tcurrPageX: 0, currPageY: 0,\r\n\tpagesX: [], pagesY: [],\r\n\taniTime: null,\r\n\twheelZoomCount: 0,\r\n\t\r\n\thandleEvent: function (e) {\r\n\t\tvar that = this;\r\n\t\tswitch(e.type) {\r\n\t\t\tcase START_EV:\r\n\t\t\t\tif (!hasTouch && e.button !== 0) return;\r\n\t\t\t\tthat._start(e);\r\n\t\t\t\tbreak;\r\n\t\t\tcase MOVE_EV: that._move(e); break;\r\n\t\t\tcase END_EV:\r\n\t\t\tcase CANCEL_EV: that._end(e); break;\r\n\t\t\tcase RESIZE_EV: that._resize(); break;\r\n\t\t\tcase 'DOMMouseScroll': case 'mousewheel': that._wheel(e); break;\r\n\t\t\tcase TRNEND_EV: that._transitionEnd(e); break;\r\n\t\t}\r\n\t},\r\n\t\r\n\t_checkDOMChanges: function () {\r\n\t\tif (this.moved || this.zoomed || this.animating ||\r\n\t\t\t(this.scrollerW == this.scroller.offsetWidth * this.scale && this.scrollerH == this.scroller.offsetHeight * this.scale)) return;\r\n\r\n\t\tthis.refresh();\r\n\t},\r\n\t\r\n\t_scrollbar: function (dir) {\r\n\t\tvar that = this,\r\n\t\t\tbar;\r\n\r\n\t\tif (!that[dir + 'Scrollbar']) {\r\n\t\t\tif (that[dir + 'ScrollbarWrapper']) {\r\n\t\t\t\tif (hasTransform) that[dir + 'ScrollbarIndicator'].style[transform] = '';\r\n\t\t\t\tthat[dir + 'ScrollbarWrapper'].parentNode.removeChild(that[dir + 'ScrollbarWrapper']);\r\n\t\t\t\tthat[dir + 'ScrollbarWrapper'] = null;\r\n\t\t\t\tthat[dir + 'ScrollbarIndicator'] = null;\r\n\t\t\t}\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (!that[dir + 'ScrollbarWrapper']) {\r\n\t\t\t// Create the scrollbar wrapper\r\n\t\t\tbar = doc.createElement('div');\r\n\r\n\t\t\tif (that.options.scrollbarClass) bar.className = that.options.scrollbarClass + dir.toUpperCase();\r\n\t\t\telse bar.style.cssText = 'position:absolute;z-index:100;' + (dir == 'h' ? 'height:7px;bottom:1px;left:2px;right:' + (that.vScrollbar ? '7' : '2') + 'px' : 'width:7px;bottom:' + (that.hScrollbar ? '7' : '2') + 'px;top:2px;right:1px');\r\n\r\n\t\t\tbar.style.cssText += ';pointer-events:none;' + cssVendor + 'transition-property:opacity;' + cssVendor + 'transition-duration:' + (that.options.fadeScrollbar ? '350ms' : '0') + ';overflow:hidden;opacity:' + (that.options.hideScrollbar ? '0' : '1');\r\n\r\n\t\t\tthat.wrapper.appendChild(bar);\r\n\t\t\tthat[dir + 'ScrollbarWrapper'] = bar;\r\n\r\n\t\t\t// Create the scrollbar indicator\r\n\t\t\tbar = doc.createElement('div');\r\n\t\t\tif (!that.options.scrollbarClass) {\r\n\t\t\t\tbar.style.cssText = 'position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);' + cssVendor + 'background-clip:padding-box;' + cssVendor + 'box-sizing:border-box;' + (dir == 'h' ? 'height:100%' : 'width:100%') + ';' + cssVendor + 'border-radius:3px;border-radius:3px';\r\n\t\t\t}\r\n\t\t\tbar.style.cssText += ';pointer-events:none;' + cssVendor + 'transition-property:' + cssVendor + 'transform;' + cssVendor + 'transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);' + cssVendor + 'transition-duration:0;' + cssVendor + 'transform: translate(0,0)' + translateZ;\r\n\t\t\tif (that.options.useTransition) bar.style.cssText += ';' + cssVendor + 'transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)';\r\n\r\n\t\t\tthat[dir + 'ScrollbarWrapper'].appendChild(bar);\r\n\t\t\tthat[dir + 'ScrollbarIndicator'] = bar;\r\n\t\t}\r\n\r\n\t\tif (dir == 'h') {\r\n\t\t\tthat.hScrollbarSize = that.hScrollbarWrapper.clientWidth;\r\n\t\t\tthat.hScrollbarIndicatorSize = m.max(m.round(that.hScrollbarSize * that.hScrollbarSize / that.scrollerW), 8);\r\n\t\t\tthat.hScrollbarIndicator.style.width = that.hScrollbarIndicatorSize + 'px';\r\n\t\t\tthat.hScrollbarMaxScroll = that.hScrollbarSize - that.hScrollbarIndicatorSize;\r\n\t\t\tthat.hScrollbarProp = that.hScrollbarMaxScroll / that.maxScrollX;\r\n\t\t} else {\r\n\t\t\tthat.vScrollbarSize = that.vScrollbarWrapper.clientHeight;\r\n\t\t\tthat.vScrollbarIndicatorSize = m.max(m.round(that.vScrollbarSize * that.vScrollbarSize / that.scrollerH), 8);\r\n\t\t\tthat.vScrollbarIndicator.style.height = that.vScrollbarIndicatorSize + 'px';\r\n\t\t\tthat.vScrollbarMaxScroll = that.vScrollbarSize - that.vScrollbarIndicatorSize;\r\n\t\t\tthat.vScrollbarProp = that.vScrollbarMaxScroll / that.maxScrollY;\r\n\t\t}\r\n\r\n\t\t// Reset position\r\n\t\tthat._scrollbarPos(dir, true);\r\n\t},\r\n\t\r\n\t_resize: function () {\r\n\t\tvar that = this;\r\n\t\tsetTimeout(function () { that.refresh(); }, isAndroid ? 200 : 0);\r\n\t},\r\n\t\r\n\t_pos: function (x, y) {\r\n\t\tif (this.zoomed) return;\r\n\r\n\t\tx = this.hScroll ? x : 0;\r\n\t\ty = this.vScroll ? y : 0;\r\n\r\n\t\tif (this.options.useTransform) {\r\n\t\t\tthis.scroller.style[transform] = 'translate(' + x + 'px,' + y + 'px) scale(' + this.scale + ')' + translateZ;\r\n\t\t} else {\r\n\t\t\tx = m.round(x);\r\n\t\t\ty = m.round(y);\r\n\t\t\tthis.scroller.style.left = x + 'px';\r\n\t\t\tthis.scroller.style.top = y + 'px';\r\n\t\t}\r\n\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\r\n\t\tthis._scrollbarPos('h');\r\n\t\tthis._scrollbarPos('v');\r\n\t},\r\n\r\n\t_scrollbarPos: function (dir, hidden) {\r\n\t\tvar that = this,\r\n\t\t\tpos = dir == 'h' ? that.x : that.y,\r\n\t\t\tsize;\r\n\r\n\t\tif (!that[dir + 'Scrollbar']) return;\r\n\r\n\t\tpos = that[dir + 'ScrollbarProp'] * pos;\r\n\r\n\t\tif (pos < 0) {\r\n\t\t\tif (!that.options.fixedScrollbar) {\r\n\t\t\t\tsize = that[dir + 'ScrollbarIndicatorSize'] + m.round(pos * 3);\r\n\t\t\t\tif (size < 8) size = 8;\r\n\t\t\t\tthat[dir + 'ScrollbarIndicator'].style[dir == 'h' ? 'width' : 'height'] = size + 'px';\r\n\t\t\t}\r\n\t\t\tpos = 0;\r\n\t\t} else if (pos > that[dir + 'ScrollbarMaxScroll']) {\r\n\t\t\tif (!that.options.fixedScrollbar) {\r\n\t\t\t\tsize = that[dir + 'ScrollbarIndicatorSize'] - m.round((pos - that[dir + 'ScrollbarMaxScroll']) * 3);\r\n\t\t\t\tif (size < 8) size = 8;\r\n\t\t\t\tthat[dir + 'ScrollbarIndicator'].style[dir == 'h' ? 'width' : 'height'] = size + 'px';\r\n\t\t\t\tpos = that[dir + 'ScrollbarMaxScroll'] + (that[dir + 'ScrollbarIndicatorSize'] - size);\r\n\t\t\t} else {\r\n\t\t\t\tpos = that[dir + 'ScrollbarMaxScroll'];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthat[dir + 'ScrollbarWrapper'].style[transitionDelay] = '0';\r\n\t\tthat[dir + 'ScrollbarWrapper'].style.opacity = hidden && that.options.hideScrollbar ? '0' : '1';\r\n\t\tthat[dir + 'ScrollbarIndicator'].style[transform] = 'translate(' + (dir == 'h' ? pos + 'px,0)' : '0,' + pos + 'px)') + translateZ;\r\n\t},\r\n\t\r\n\t_start: function (e) {\r\n\t\tvar that = this,\r\n\t\t\tpoint = hasTouch ? e.touches[0] : e,\r\n\t\t\tmatrix, x, y,\r\n\t\t\tc1, c2;\r\n\r\n\t\tif (!that.enabled) return;\r\n\r\n\t\tif (that.options.onBeforeScrollStart) that.options.onBeforeScrollStart.call(that, e);\r\n\r\n\t\tif (that.options.useTransition || that.options.zoom) that._transitionTime(0);\r\n\r\n\t\tthat.moved = false;\r\n\t\tthat.animating = false;\r\n\t\tthat.zoomed = false;\r\n\t\tthat.distX = 0;\r\n\t\tthat.distY = 0;\r\n\t\tthat.absDistX = 0;\r\n\t\tthat.absDistY = 0;\r\n\t\tthat.dirX = 0;\r\n\t\tthat.dirY = 0;\r\n\r\n\t\t// Gesture start\r\n\t\tif (that.options.zoom && hasTouch && e.touches.length > 1) {\r\n\t\t\tc1 = m.abs(e.touches[0].pageX-e.touches[1].pageX);\r\n\t\t\tc2 = m.abs(e.touches[0].pageY-e.touches[1].pageY);\r\n\t\t\tthat.touchesDistStart = m.sqrt(c1 * c1 + c2 * c2);\r\n\r\n\t\t\tthat.originX = m.abs(e.touches[0].pageX + e.touches[1].pageX - that.wrapperOffsetLeft * 2) / 2 - that.x;\r\n\t\t\tthat.originY = m.abs(e.touches[0].pageY + e.touches[1].pageY - that.wrapperOffsetTop * 2) / 2 - that.y;\r\n\r\n\t\t\tif (that.options.onZoomStart) that.options.onZoomStart.call(that, e);\r\n\t\t}\r\n\r\n\t\tif (that.options.momentum) {\r\n\t\t\tif (that.options.useTransform) {\r\n\t\t\t\t// Very lame general purpose alternative to CSSMatrix\r\n\t\t\t\tmatrix = getComputedStyle(that.scroller, null)[transform].replace(/[^0-9\\-.,]/g, '').split(',');\r\n\t\t\t\tx = +(matrix[12] || matrix[4]);\r\n\t\t\t\ty = +(matrix[13] || matrix[5]);\r\n\t\t\t} else {\r\n\t\t\t\tx = +getComputedStyle(that.scroller, null).left.replace(/[^0-9-]/g, '');\r\n\t\t\t\ty = +getComputedStyle(that.scroller, null).top.replace(/[^0-9-]/g, '');\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (x != that.x || y != that.y) {\r\n\t\t\t\tif (that.options.useTransition) that._unbind(TRNEND_EV);\r\n\t\t\t\telse cancelFrame(that.aniTime);\r\n\t\t\t\tthat.steps = [];\r\n\t\t\t\tthat._pos(x, y);\r\n\t\t\t\tif (that.options.onScrollEnd) that.options.onScrollEnd.call(that);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthat.absStartX = that.x;\t// Needed by snap threshold\r\n\t\tthat.absStartY = that.y;\r\n\r\n\t\tthat.startX = that.x;\r\n\t\tthat.startY = that.y;\r\n\t\tthat.pointX = point.pageX;\r\n\t\tthat.pointY = point.pageY;\r\n\r\n\t\tthat.startTime = e.timeStamp || Date.now();\r\n\r\n\t\tif (that.options.onScrollStart) that.options.onScrollStart.call(that, e);\r\n\r\n\t\tthat._bind(MOVE_EV, window);\r\n\t\tthat._bind(END_EV, window);\r\n\t\tthat._bind(CANCEL_EV, window);\r\n\t},\r\n\t\r\n\t_move: function (e) {\r\n\t\tvar that = this,\r\n\t\t\tpoint = hasTouch ? e.touches[0] : e,\r\n\t\t\tdeltaX = point.pageX - that.pointX,\r\n\t\t\tdeltaY = point.pageY - that.pointY,\r\n\t\t\tnewX = that.x + deltaX,\r\n\t\t\tnewY = that.y + deltaY,\r\n\t\t\tc1, c2, scale,\r\n\t\t\ttimestamp = e.timeStamp || Date.now();\r\n\r\n\t\tif (that.options.onBeforeScrollMove) that.options.onBeforeScrollMove.call(that, e);\r\n\r\n\t\t// Zoom\r\n\t\tif (that.options.zoom && hasTouch && e.touches.length > 1) {\r\n\t\t\tc1 = m.abs(e.touches[0].pageX - e.touches[1].pageX);\r\n\t\t\tc2 = m.abs(e.touches[0].pageY - e.touches[1].pageY);\r\n\t\t\tthat.touchesDist = m.sqrt(c1*c1+c2*c2);\r\n\r\n\t\t\tthat.zoomed = true;\r\n\r\n\t\t\tscale = 1 / that.touchesDistStart * that.touchesDist * this.scale;\r\n\r\n\t\t\tif (scale < that.options.zoomMin) scale = 0.5 * that.options.zoomMin * Math.pow(2.0, scale / that.options.zoomMin);\r\n\t\t\telse if (scale > that.options.zoomMax) scale = 2.0 * that.options.zoomMax * Math.pow(0.5, that.options.zoomMax / scale);\r\n\r\n\t\t\tthat.lastScale = scale / this.scale;\r\n\r\n\t\t\tnewX = this.originX - this.originX * that.lastScale + this.x;\r\n\t\t\tnewY = this.originY - this.originY * that.lastScale + this.y;\r\n\r\n\t\t\tthis.scroller.style[transform] = 'translate(' + newX + 'px,' + newY + 'px) scale(' + scale + ')' + translateZ;\r\n\r\n\t\t\tif (that.options.onZoom) that.options.onZoom.call(that, e);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthat.pointX = point.pageX;\r\n\t\tthat.pointY = point.pageY;\r\n\r\n\t\t// Slow down if outside of the boundaries\r\n\t\tif (newX > 0 || newX < that.maxScrollX) {\r\n\t\t\tnewX = that.options.bounce ? that.x + (deltaX / 2) : newX >= 0 || that.maxScrollX >= 0 ? 0 : that.maxScrollX;\r\n\t\t}\r\n\t\tif (newY > that.minScrollY || newY < that.maxScrollY) {\r\n\t\t\tnewY = that.options.bounce ? that.y + (deltaY / 2) : newY >= that.minScrollY || that.maxScrollY >= 0 ? that.minScrollY : that.maxScrollY;\r\n\t\t}\r\n\r\n\t\tthat.distX += deltaX;\r\n\t\tthat.distY += deltaY;\r\n\t\tthat.absDistX = m.abs(that.distX);\r\n\t\tthat.absDistY = m.abs(that.distY);\r\n\r\n\t\tif (that.absDistX < 6 && that.absDistY < 6) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Lock direction\r\n\t\tif (that.options.lockDirection) {\r\n\t\t\tif (that.absDistX > that.absDistY + 5) {\r\n\t\t\t\tnewY = that.y;\r\n\t\t\t\tdeltaY = 0;\r\n\t\t\t} else if (that.absDistY > that.absDistX + 5) {\r\n\t\t\t\tnewX = that.x;\r\n\t\t\t\tdeltaX = 0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthat.moved = true;\r\n\t\tthat._pos(newX, newY);\r\n\t\tthat.dirX = deltaX > 0 ? -1 : deltaX < 0 ? 1 : 0;\r\n\t\tthat.dirY = deltaY > 0 ? -1 : deltaY < 0 ? 1 : 0;\r\n\r\n\t\tif (timestamp - that.startTime > 300) {\r\n\t\t\tthat.startTime = timestamp;\r\n\t\t\tthat.startX = that.x;\r\n\t\t\tthat.startY = that.y;\r\n\t\t}\r\n\t\t\r\n\t\tif (that.options.onScrollMove) that.options.onScrollMove.call(that, e);\r\n\t},\r\n\t\r\n\t_end: function (e) {\r\n\t\tif (hasTouch && e.touches.length !== 0) return;\r\n\r\n\t\tvar that = this,\r\n\t\t\tpoint = hasTouch ? e.changedTouches[0] : e,\r\n\t\t\ttarget, ev,\r\n\t\t\tmomentumX = { dist:0, time:0 },\r\n\t\t\tmomentumY = { dist:0, time:0 },\r\n\t\t\tduration = (e.timeStamp || Date.now()) - that.startTime,\r\n\t\t\tnewPosX = that.x,\r\n\t\t\tnewPosY = that.y,\r\n\t\t\tdistX, distY,\r\n\t\t\tnewDuration,\r\n\t\t\tsnap,\r\n\t\t\tscale;\r\n\r\n\t\tthat._unbind(MOVE_EV, window);\r\n\t\tthat._unbind(END_EV, window);\r\n\t\tthat._unbind(CANCEL_EV, window);\r\n\r\n\t\tif (that.options.onBeforeScrollEnd) that.options.onBeforeScrollEnd.call(that, e);\r\n\r\n\t\tif (that.zoomed) {\r\n\t\t\tscale = that.scale * that.lastScale;\r\n\t\t\tscale = Math.max(that.options.zoomMin, scale);\r\n\t\t\tscale = Math.min(that.options.zoomMax, scale);\r\n\t\t\tthat.lastScale = scale / that.scale;\r\n\t\t\tthat.scale = scale;\r\n\r\n\t\t\tthat.x = that.originX - that.originX * that.lastScale + that.x;\r\n\t\t\tthat.y = that.originY - that.originY * that.lastScale + that.y;\r\n\t\t\t\r\n\t\t\tthat.scroller.style[transitionDuration] = '200ms';\r\n\t\t\tthat.scroller.style[transform] = 'translate(' + that.x + 'px,' + that.y + 'px) scale(' + that.scale + ')' + translateZ;\r\n\t\t\t\r\n\t\t\tthat.zoomed = false;\r\n\t\t\tthat.refresh();\r\n\r\n\t\t\tif (that.options.onZoomEnd) that.options.onZoomEnd.call(that, e);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (!that.moved) {\r\n\t\t\tif (hasTouch) {\r\n\t\t\t\tif (that.doubleTapTimer && that.options.zoom) {\r\n\t\t\t\t\t// Double tapped\r\n\t\t\t\t\tclearTimeout(that.doubleTapTimer);\r\n\t\t\t\t\tthat.doubleTapTimer = null;\r\n\t\t\t\t\tif (that.options.onZoomStart) that.options.onZoomStart.call(that, e);\r\n\t\t\t\t\tthat.zoom(that.pointX, that.pointY, that.scale == 1 ? that.options.doubleTapZoom : 1);\r\n\t\t\t\t\tif (that.options.onZoomEnd) {\r\n\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\tthat.options.onZoomEnd.call(that, e);\r\n\t\t\t\t\t\t}, 200); // 200 is default zoom duration\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (this.options.handleClick) {\r\n\t\t\t\t\tthat.doubleTapTimer = setTimeout(function () {\r\n\t\t\t\t\t\tthat.doubleTapTimer = null;\r\n\r\n\t\t\t\t\t\t// Find the last touched element\r\n\t\t\t\t\t\ttarget = point.target;\r\n\t\t\t\t\t\twhile (target.nodeType != 1) target = target.parentNode;\r\n\r\n\t\t\t\t\t\tif (target.tagName != 'SELECT' && target.tagName != 'INPUT' && target.tagName != 'TEXTAREA') {\r\n\t\t\t\t\t\t\tev = doc.createEvent('MouseEvents');\r\n\t\t\t\t\t\t\tev.initMouseEvent('click', true, true, e.view, 1,\r\n\t\t\t\t\t\t\t\tpoint.screenX, point.screenY, point.clientX, point.clientY,\r\n\t\t\t\t\t\t\t\te.ctrlKey, e.altKey, e.shiftKey, e.metaKey,\r\n\t\t\t\t\t\t\t\t0, null);\r\n\t\t\t\t\t\t\tev._fake = true;\r\n\t\t\t\t\t\t\ttarget.dispatchEvent(ev);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, that.options.zoom ? 250 : 0);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthat._resetPos(400);\r\n\r\n\t\t\tif (that.options.onTouchEnd) that.options.onTouchEnd.call(that, e);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (duration < 300 && that.options.momentum) {\r\n\t\t\tmomentumX = newPosX ? that._momentum(newPosX - that.startX, duration, -that.x, that.scrollerW - that.wrapperW + that.x, that.options.bounce ? that.wrapperW : 0) : momentumX;\r\n\t\t\tmomentumY = newPosY ? that._momentum(newPosY - that.startY, duration, -that.y, (that.maxScrollY < 0 ? that.scrollerH - that.wrapperH + that.y - that.minScrollY : 0), that.options.bounce ? that.wrapperH : 0) : momentumY;\r\n\r\n\t\t\tnewPosX = that.x + momentumX.dist;\r\n\t\t\tnewPosY = that.y + momentumY.dist;\r\n\r\n\t\t\tif ((that.x > 0 && newPosX > 0) || (that.x < that.maxScrollX && newPosX < that.maxScrollX)) momentumX = { dist:0, time:0 };\r\n\t\t\tif ((that.y > that.minScrollY && newPosY > that.minScrollY) || (that.y < that.maxScrollY && newPosY < that.maxScrollY)) momentumY = { dist:0, time:0 };\r\n\t\t}\r\n\r\n\t\tif (momentumX.dist || momentumY.dist) {\r\n\t\t\tnewDuration = m.max(m.max(momentumX.time, momentumY.time), 10);\r\n\r\n\t\t\t// Do we need to snap?\r\n\t\t\tif (that.options.snap) {\r\n\t\t\t\tdistX = newPosX - that.absStartX;\r\n\t\t\t\tdistY = newPosY - that.absStartY;\r\n\t\t\t\tif (m.abs(distX) < that.options.snapThreshold && m.abs(distY) < that.options.snapThreshold) { that.scrollTo(that.absStartX, that.absStartY, 200); }\r\n\t\t\t\telse {\r\n\t\t\t\t\tsnap = that._snap(newPosX, newPosY);\r\n\t\t\t\t\tnewPosX = snap.x;\r\n\t\t\t\t\tnewPosY = snap.y;\r\n\t\t\t\t\tnewDuration = m.max(snap.time, newDuration);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthat.scrollTo(m.round(newPosX), m.round(newPosY), newDuration);\r\n\r\n\t\t\tif (that.options.onTouchEnd) that.options.onTouchEnd.call(that, e);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Do we need to snap?\r\n\t\tif (that.options.snap) {\r\n\t\t\tdistX = newPosX - that.absStartX;\r\n\t\t\tdistY = newPosY - that.absStartY;\r\n\t\t\tif (m.abs(distX) < that.options.snapThreshold && m.abs(distY) < that.options.snapThreshold) that.scrollTo(that.absStartX, that.absStartY, 200);\r\n\t\t\telse {\r\n\t\t\t\tsnap = that._snap(that.x, that.y);\r\n\t\t\t\tif (snap.x != that.x || snap.y != that.y) that.scrollTo(snap.x, snap.y, snap.time);\r\n\t\t\t}\r\n\r\n\t\t\tif (that.options.onTouchEnd) that.options.onTouchEnd.call(that, e);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthat._resetPos(200);\r\n\t\tif (that.options.onTouchEnd) that.options.onTouchEnd.call(that, e);\r\n\t},\r\n\t\r\n\t_resetPos: function (time) {\r\n\t\tvar that = this,\r\n\t\t\tresetX = that.x >= 0 ? 0 : that.x < that.maxScrollX ? that.maxScrollX : that.x,\r\n\t\t\tresetY = that.y >= that.minScrollY || that.maxScrollY > 0 ? that.minScrollY : that.y < that.maxScrollY ? that.maxScrollY : that.y;\r\n\r\n\t\tif (resetX == that.x && resetY == that.y) {\r\n\t\t\tif (that.moved) {\r\n\t\t\t\tthat.moved = false;\r\n\t\t\t\tif (that.options.onScrollEnd) that.options.onScrollEnd.call(that);\t\t// Execute custom code on scroll end\r\n\t\t\t}\r\n\r\n\t\t\tif (that.hScrollbar && that.options.hideScrollbar) {\r\n\t\t\t\tif (vendor == 'webkit') that.hScrollbarWrapper.style[transitionDelay] = '300ms';\r\n\t\t\t\tthat.hScrollbarWrapper.style.opacity = '0';\r\n\t\t\t}\r\n\t\t\tif (that.vScrollbar && that.options.hideScrollbar) {\r\n\t\t\t\tif (vendor == 'webkit') that.vScrollbarWrapper.style[transitionDelay] = '300ms';\r\n\t\t\t\tthat.vScrollbarWrapper.style.opacity = '0';\r\n\t\t\t}\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthat.scrollTo(resetX, resetY, time || 0);\r\n\t},\r\n\r\n\t_wheel: function (e) {\r\n\t\tvar that = this,\r\n\t\t\twheelDeltaX, wheelDeltaY,\r\n\t\t\tdeltaX, deltaY,\r\n\t\t\tdeltaScale;\r\n\r\n\t\tif ('wheelDeltaX' in e) {\r\n\t\t\twheelDeltaX = e.wheelDeltaX / 12;\r\n\t\t\twheelDeltaY = e.wheelDeltaY / 12;\r\n\t\t} else if('wheelDelta' in e) {\r\n\t\t\twheelDeltaX = wheelDeltaY = e.wheelDelta / 12;\r\n\t\t} else if ('detail' in e) {\r\n\t\t\twheelDeltaX = wheelDeltaY = -e.detail * 3;\r\n\t\t} else {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tif (that.options.wheelAction == 'zoom') {\r\n\t\t\tdeltaScale = that.scale * Math.pow(2, 1/3 * (wheelDeltaY ? wheelDeltaY / Math.abs(wheelDeltaY) : 0));\r\n\t\t\tif (deltaScale < that.options.zoomMin) deltaScale = that.options.zoomMin;\r\n\t\t\tif (deltaScale > that.options.zoomMax) deltaScale = that.options.zoomMax;\r\n\t\t\t\r\n\t\t\tif (deltaScale != that.scale) {\r\n\t\t\t\tif (!that.wheelZoomCount && that.options.onZoomStart) that.options.onZoomStart.call(that, e);\r\n\t\t\t\tthat.wheelZoomCount++;\r\n\t\t\t\t\r\n\t\t\t\tthat.zoom(e.pageX, e.pageY, deltaScale, 400);\r\n\t\t\t\t\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tthat.wheelZoomCount--;\r\n\t\t\t\t\tif (!that.wheelZoomCount && that.options.onZoomEnd) that.options.onZoomEnd.call(that, e);\r\n\t\t\t\t}, 400);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tdeltaX = that.x + wheelDeltaX;\r\n\t\tdeltaY = that.y + wheelDeltaY;\r\n\r\n\t\tif (deltaX > 0) deltaX = 0;\r\n\t\telse if (deltaX < that.maxScrollX) deltaX = that.maxScrollX;\r\n\r\n\t\tif (deltaY > that.minScrollY) deltaY = that.minScrollY;\r\n\t\telse if (deltaY < that.maxScrollY) deltaY = that.maxScrollY;\r\n    \r\n\t\tif (that.maxScrollY < 0) {\r\n\t\t\tthat.scrollTo(deltaX, deltaY, 0);\r\n\t\t}\r\n\t},\r\n\t\r\n\t_transitionEnd: function (e) {\r\n\t\tvar that = this;\r\n\r\n\t\tif (e.target != that.scroller) return;\r\n\r\n\t\tthat._unbind(TRNEND_EV);\r\n\t\t\r\n\t\tthat._startAni();\r\n\t},\r\n\r\n\r\n\t/**\r\n\t*\r\n\t* Utilities\r\n\t*\r\n\t*/\r\n\t_startAni: function () {\r\n\t\tvar that = this,\r\n\t\t\tstartX = that.x, startY = that.y,\r\n\t\t\tstartTime = Date.now(),\r\n\t\t\tstep, easeOut,\r\n\t\t\tanimate;\r\n\r\n\t\tif (that.animating) return;\r\n\t\t\r\n\t\tif (!that.steps.length) {\r\n\t\t\tthat._resetPos(400);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tstep = that.steps.shift();\r\n\t\t\r\n\t\tif (step.x == startX && step.y == startY) step.time = 0;\r\n\r\n\t\tthat.animating = true;\r\n\t\tthat.moved = true;\r\n\t\t\r\n\t\tif (that.options.useTransition) {\r\n\t\t\tthat._transitionTime(step.time);\r\n\t\t\tthat._pos(step.x, step.y);\r\n\t\t\tthat.animating = false;\r\n\t\t\tif (step.time) that._bind(TRNEND_EV);\r\n\t\t\telse that._resetPos(0);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tanimate = function () {\r\n\t\t\tvar now = Date.now(),\r\n\t\t\t\tnewX, newY;\r\n\r\n\t\t\tif (now >= startTime + step.time) {\r\n\t\t\t\tthat._pos(step.x, step.y);\r\n\t\t\t\tthat.animating = false;\r\n\t\t\t\tif (that.options.onAnimationEnd) that.options.onAnimationEnd.call(that);\t\t\t// Execute custom code on animation end\r\n\t\t\t\tthat._startAni();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tnow = (now - startTime) / step.time - 1;\r\n\t\t\teaseOut = m.sqrt(1 - now * now);\r\n\t\t\tnewX = (step.x - startX) * easeOut + startX;\r\n\t\t\tnewY = (step.y - startY) * easeOut + startY;\r\n\t\t\tthat._pos(newX, newY);\r\n\t\t\tif (that.animating) that.aniTime = nextFrame(animate);\r\n\t\t};\r\n\r\n\t\tanimate();\r\n\t},\r\n\r\n\t_transitionTime: function (time) {\r\n\t\ttime += 'ms';\r\n\t\tthis.scroller.style[transitionDuration] = time;\r\n\t\tif (this.hScrollbar) this.hScrollbarIndicator.style[transitionDuration] = time;\r\n\t\tif (this.vScrollbar) this.vScrollbarIndicator.style[transitionDuration] = time;\r\n\t},\r\n\r\n\t_momentum: function (dist, time, maxDistUpper, maxDistLower, size) {\r\n\t\tvar deceleration = 0.0006,\r\n\t\t\tspeed = m.abs(dist) / time,\r\n\t\t\tnewDist = (speed * speed) / (2 * deceleration),\r\n\t\t\tnewTime = 0, outsideDist = 0;\r\n\r\n\t\t// Proportinally reduce speed if we are outside of the boundaries\r\n\t\tif (dist > 0 && newDist > maxDistUpper) {\r\n\t\t\toutsideDist = size / (6 / (newDist / speed * deceleration));\r\n\t\t\tmaxDistUpper = maxDistUpper + outsideDist;\r\n\t\t\tspeed = speed * maxDistUpper / newDist;\r\n\t\t\tnewDist = maxDistUpper;\r\n\t\t} else if (dist < 0 && newDist > maxDistLower) {\r\n\t\t\toutsideDist = size / (6 / (newDist / speed * deceleration));\r\n\t\t\tmaxDistLower = maxDistLower + outsideDist;\r\n\t\t\tspeed = speed * maxDistLower / newDist;\r\n\t\t\tnewDist = maxDistLower;\r\n\t\t}\r\n\r\n\t\tnewDist = newDist * (dist < 0 ? -1 : 1);\r\n\t\tnewTime = speed / deceleration;\r\n\r\n\t\treturn { dist: newDist, time: m.round(newTime) };\r\n\t},\r\n\r\n\t_offset: function (el) {\r\n\t\tvar left = -el.offsetLeft,\r\n\t\t\ttop = -el.offsetTop;\r\n\t\t\t\r\n\t\twhile (el = el.offsetParent) {\r\n\t\t\tleft -= el.offsetLeft;\r\n\t\t\ttop -= el.offsetTop;\r\n\t\t}\r\n\t\t\r\n\t\tif (el != this.wrapper) {\r\n\t\t\tleft *= this.scale;\r\n\t\t\ttop *= this.scale;\r\n\t\t}\r\n\r\n\t\treturn { left: left, top: top };\r\n\t},\r\n\r\n\t_snap: function (x, y) {\r\n\t\tvar that = this,\r\n\t\t\ti, l,\r\n\t\t\tpage, time,\r\n\t\t\tsizeX, sizeY;\r\n\r\n\t\t// Check page X\r\n\t\tpage = that.pagesX.length - 1;\r\n\t\tfor (i=0, l=that.pagesX.length; i<l; i++) {\r\n\t\t\tif (x >= that.pagesX[i]) {\r\n\t\t\t\tpage = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (page == that.currPageX && page > 0 && that.dirX < 0) page--;\r\n\t\tx = that.pagesX[page];\r\n\t\tsizeX = m.abs(x - that.pagesX[that.currPageX]);\r\n\t\tsizeX = sizeX ? m.abs(that.x - x) / sizeX * 500 : 0;\r\n\t\tthat.currPageX = page;\r\n\r\n\t\t// Check page Y\r\n\t\tpage = that.pagesY.length-1;\r\n\t\tfor (i=0; i<page; i++) {\r\n\t\t\tif (y >= that.pagesY[i]) {\r\n\t\t\t\tpage = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (page == that.currPageY && page > 0 && that.dirY < 0) page--;\r\n\t\ty = that.pagesY[page];\r\n\t\tsizeY = m.abs(y - that.pagesY[that.currPageY]);\r\n\t\tsizeY = sizeY ? m.abs(that.y - y) / sizeY * 500 : 0;\r\n\t\tthat.currPageY = page;\r\n\r\n\t\t// Snap with constant speed (proportional duration)\r\n\t\ttime = m.round(m.max(sizeX, sizeY)) || 200;\r\n\r\n\t\treturn { x: x, y: y, time: time };\r\n\t},\r\n\r\n\t_bind: function (type, el, bubble) {\r\n\t\t(el || this.scroller).addEventListener(type, this, !!bubble);\r\n\t},\r\n\r\n\t_unbind: function (type, el, bubble) {\r\n\t\t(el || this.scroller).removeEventListener(type, this, !!bubble);\r\n\t},\r\n\r\n\r\n\t/**\r\n\t*\r\n\t* Public methods\r\n\t*\r\n\t*/\r\n\tdestroy: function () {\r\n\t\tvar that = this;\r\n\r\n\t\tthat.scroller.style[transform] = '';\r\n\r\n\t\t// Remove the scrollbars\r\n\t\tthat.hScrollbar = false;\r\n\t\tthat.vScrollbar = false;\r\n\t\tthat._scrollbar('h');\r\n\t\tthat._scrollbar('v');\r\n\r\n\t\t// Remove the event listeners\r\n\t\tthat._unbind(RESIZE_EV, window);\r\n\t\tthat._unbind(START_EV);\r\n\t\tthat._unbind(MOVE_EV, window);\r\n\t\tthat._unbind(END_EV, window);\r\n\t\tthat._unbind(CANCEL_EV, window);\r\n\t\t\r\n\t\tif (!that.options.hasTouch) {\r\n\t\t\tthat._unbind('DOMMouseScroll');\r\n\t\t\tthat._unbind('mousewheel');\r\n\t\t}\r\n\t\t\r\n\t\tif (that.options.useTransition) that._unbind(TRNEND_EV);\r\n\t\t\r\n\t\tif (that.options.checkDOMChanges) clearInterval(that.checkDOMTime);\r\n\t\t\r\n\t\tif (that.options.onDestroy) that.options.onDestroy.call(that);\r\n\t},\r\n\r\n\trefresh: function () {\r\n\t\tvar that = this,\r\n\t\t\toffset,\r\n\t\t\ti, l,\r\n\t\t\tels,\r\n\t\t\tpos = 0,\r\n\t\t\tpage = 0;\r\n\r\n\t\tif (that.scale < that.options.zoomMin) that.scale = that.options.zoomMin;\r\n\t\tthat.wrapperW = that.wrapper.clientWidth || 1;\r\n\t\tthat.wrapperH = that.wrapper.clientHeight || 1;\r\n\r\n\t\tthat.minScrollY = -that.options.topOffset || 0;\r\n\t\tthat.scrollerW = m.round(that.scroller.offsetWidth * that.scale);\r\n\t\tthat.scrollerH = m.round((that.scroller.offsetHeight + that.minScrollY) * that.scale);\r\n\t\tthat.maxScrollX = that.wrapperW - that.scrollerW;\r\n\t\tthat.maxScrollY = that.wrapperH - that.scrollerH + that.minScrollY;\r\n\t\tthat.dirX = 0;\r\n\t\tthat.dirY = 0;\r\n\r\n\t\tif (that.options.onRefresh) that.options.onRefresh.call(that);\r\n\r\n\t\tthat.hScroll = that.options.hScroll && that.maxScrollX < 0;\r\n\t\tthat.vScroll = that.options.vScroll && (!that.options.bounceLock && !that.hScroll || that.scrollerH > that.wrapperH);\r\n\r\n\t\tthat.hScrollbar = that.hScroll && that.options.hScrollbar;\r\n\t\tthat.vScrollbar = that.vScroll && that.options.vScrollbar && that.scrollerH > that.wrapperH;\r\n\r\n\t\toffset = that._offset(that.wrapper);\r\n\t\tthat.wrapperOffsetLeft = -offset.left;\r\n\t\tthat.wrapperOffsetTop = -offset.top;\r\n\r\n\t\t// Prepare snap\r\n\t\tif (typeof that.options.snap == 'string') {\r\n\t\t\tthat.pagesX = [];\r\n\t\t\tthat.pagesY = [];\r\n\t\t\tels = that.scroller.querySelectorAll(that.options.snap);\r\n\t\t\tfor (i=0, l=els.length; i<l; i++) {\r\n\t\t\t\tpos = that._offset(els[i]);\r\n\t\t\t\tpos.left += that.wrapperOffsetLeft;\r\n\t\t\t\tpos.top += that.wrapperOffsetTop;\r\n\t\t\t\tthat.pagesX[i] = pos.left < that.maxScrollX ? that.maxScrollX : pos.left * that.scale;\r\n\t\t\t\tthat.pagesY[i] = pos.top < that.maxScrollY ? that.maxScrollY : pos.top * that.scale;\r\n\t\t\t}\r\n\t\t} else if (that.options.snap) {\r\n\t\t\tthat.pagesX = [];\r\n\t\t\twhile (pos >= that.maxScrollX) {\r\n\t\t\t\tthat.pagesX[page] = pos;\r\n\t\t\t\tpos = pos - that.wrapperW;\r\n\t\t\t\tpage++;\r\n\t\t\t}\r\n\t\t\tif (that.maxScrollX%that.wrapperW) that.pagesX[that.pagesX.length] = that.maxScrollX - that.pagesX[that.pagesX.length-1] + that.pagesX[that.pagesX.length-1];\r\n\r\n\t\t\tpos = 0;\r\n\t\t\tpage = 0;\r\n\t\t\tthat.pagesY = [];\r\n\t\t\twhile (pos >= that.maxScrollY) {\r\n\t\t\t\tthat.pagesY[page] = pos;\r\n\t\t\t\tpos = pos - that.wrapperH;\r\n\t\t\t\tpage++;\r\n\t\t\t}\r\n\t\t\tif (that.maxScrollY%that.wrapperH) that.pagesY[that.pagesY.length] = that.maxScrollY - that.pagesY[that.pagesY.length-1] + that.pagesY[that.pagesY.length-1];\r\n\t\t}\r\n\r\n\t\t// Prepare the scrollbars\r\n\t\tthat._scrollbar('h');\r\n\t\tthat._scrollbar('v');\r\n\r\n\t\tif (!that.zoomed) {\r\n\t\t\tthat.scroller.style[transitionDuration] = '0';\r\n\t\t\tthat._resetPos(400);\r\n\t\t}\r\n\t},\r\n\r\n\tscrollTo: function (x, y, time, relative) {\r\n\t\tvar that = this,\r\n\t\t\tstep = x,\r\n\t\t\ti, l;\r\n\r\n\t\tthat.stop();\r\n\r\n\t\tif (!step.length) step = [{ x: x, y: y, time: time, relative: relative }];\r\n\t\t\r\n\t\tfor (i=0, l=step.length; i<l; i++) {\r\n\t\t\tif (step[i].relative) { step[i].x = that.x - step[i].x; step[i].y = that.y - step[i].y; }\r\n\t\t\tthat.steps.push({ x: step[i].x, y: step[i].y, time: step[i].time || 0 });\r\n\t\t}\r\n\r\n\t\tthat._startAni();\r\n\t},\r\n\r\n\tscrollToElement: function (el, time) {\r\n\t\tvar that = this, pos;\r\n\t\tel = el.nodeType ? el : that.scroller.querySelector(el);\r\n\t\tif (!el) return;\r\n\r\n\t\tpos = that._offset(el);\r\n\t\tpos.left += that.wrapperOffsetLeft;\r\n\t\tpos.top += that.wrapperOffsetTop;\r\n\r\n\t\tpos.left = pos.left > 0 ? 0 : pos.left < that.maxScrollX ? that.maxScrollX : pos.left;\r\n\t\tpos.top = pos.top > that.minScrollY ? that.minScrollY : pos.top < that.maxScrollY ? that.maxScrollY : pos.top;\r\n\t\ttime = time === undefined ? m.max(m.abs(pos.left)*2, m.abs(pos.top)*2) : time;\r\n\r\n\t\tthat.scrollTo(pos.left, pos.top, time);\r\n\t},\r\n\r\n\tscrollToPage: function (pageX, pageY, time) {\r\n\t\tvar that = this, x, y;\r\n\t\t\r\n\t\ttime = time === undefined ? 400 : time;\r\n\r\n\t\tif (that.options.onScrollStart) that.options.onScrollStart.call(that);\r\n\r\n\t\tif (that.options.snap) {\r\n\t\t\tpageX = pageX == 'next' ? that.currPageX+1 : pageX == 'prev' ? that.currPageX-1 : pageX;\r\n\t\t\tpageY = pageY == 'next' ? that.currPageY+1 : pageY == 'prev' ? that.currPageY-1 : pageY;\r\n\r\n\t\t\tpageX = pageX < 0 ? 0 : pageX > that.pagesX.length-1 ? that.pagesX.length-1 : pageX;\r\n\t\t\tpageY = pageY < 0 ? 0 : pageY > that.pagesY.length-1 ? that.pagesY.length-1 : pageY;\r\n\r\n\t\t\tthat.currPageX = pageX;\r\n\t\t\tthat.currPageY = pageY;\r\n\t\t\tx = that.pagesX[pageX];\r\n\t\t\ty = that.pagesY[pageY];\r\n\t\t} else {\r\n\t\t\tx = -that.wrapperW * pageX;\r\n\t\t\ty = -that.wrapperH * pageY;\r\n\t\t\tif (x < that.maxScrollX) x = that.maxScrollX;\r\n\t\t\tif (y < that.maxScrollY) y = that.maxScrollY;\r\n\t\t}\r\n\r\n\t\tthat.scrollTo(x, y, time);\r\n\t},\r\n\r\n\tdisable: function () {\r\n\t\tthis.stop();\r\n\t\tthis._resetPos(0);\r\n\t\tthis.enabled = false;\r\n\r\n\t\t// If disabled after touchstart we make sure that there are no left over events\r\n\t\tthis._unbind(MOVE_EV, window);\r\n\t\tthis._unbind(END_EV, window);\r\n\t\tthis._unbind(CANCEL_EV, window);\r\n\t},\r\n\t\r\n\tenable: function () {\r\n\t\tthis.enabled = true;\r\n\t},\r\n\t\r\n\tstop: function () {\r\n\t\tif (this.options.useTransition) this._unbind(TRNEND_EV);\r\n\t\telse cancelFrame(this.aniTime);\r\n\t\tthis.steps = [];\r\n\t\tthis.moved = false;\r\n\t\tthis.animating = false;\r\n\t},\r\n\t\r\n\tzoom: function (x, y, scale, time) {\r\n\t\tvar that = this,\r\n\t\t\trelScale = scale / that.scale;\r\n\r\n\t\tif (!that.options.useTransform) return;\r\n\r\n\t\tthat.zoomed = true;\r\n\t\ttime = time === undefined ? 200 : time;\r\n\t\tx = x - that.wrapperOffsetLeft - that.x;\r\n\t\ty = y - that.wrapperOffsetTop - that.y;\r\n\t\tthat.x = x - x * relScale + that.x;\r\n\t\tthat.y = y - y * relScale + that.y;\r\n\r\n\t\tthat.scale = scale;\r\n\t\tthat.refresh();\r\n\r\n\t\tthat.x = that.x > 0 ? 0 : that.x < that.maxScrollX ? that.maxScrollX : that.x;\r\n\t\tthat.y = that.y > that.minScrollY ? that.minScrollY : that.y < that.maxScrollY ? that.maxScrollY : that.y;\r\n\r\n\t\tthat.scroller.style[transitionDuration] = time + 'ms';\r\n\t\tthat.scroller.style[transform] = 'translate(' + that.x + 'px,' + that.y + 'px) scale(' + scale + ')' + translateZ;\r\n\t\tthat.zoomed = false;\r\n\t},\r\n\t\r\n\tisReady: function () {\r\n\t\treturn !this.moved && !this.zoomed && !this.animating;\r\n\t}\r\n};\r\n\r\nfunction prefixStyle (style) {\r\n\tif ( vendor === '' ) return style;\r\n\r\n\tstyle = style.charAt(0).toUpperCase() + style.substr(1);\r\n\treturn vendor + style;\r\n}\r\n\r\ndummyStyle = null;\t// for the sake of it\r\n\r\nif (typeof exports !== 'undefined') exports.iScroll = iScroll;\r\nelse window.iScroll = iScroll;\r\n\r\n})(window, document);\r\n\r\n\r\n/**\r\n * 初始化iScroll控件\r\n */\r\nfunction loaded(renderId) {\r\n\tvar\tpullDownEl = document.getElementById('pullDown');\r\n\tvar pullDownOffset = pullDownEl.offsetHeight;\r\n\tvar pullUpEl = document.getElementById('pullUp');\r\n\tvar pullUpOffset = pullUpEl.offsetHeight;\r\n\r\n\tmyScroll = new iScroll(renderId, {\r\n\t\tscrollbarClass: 'myScrollbar', /* 重要样式 */\r\n\t\tuseTransition: false, /* 此属性不知用意，本人从true改为false */\r\n\t\ttopOffset: pullDownOffset,\r\n\t\tonRefresh: function () {\r\n\t\t\tif (pullDownEl.className.match('loading')) {\r\n\t\t\t\tpullDownEl.className = '';\r\n\t\t\t\tpullDownEl.querySelector('.pullDownLabel').innerHTML = '下拉刷新.';\r\n\t\t\t} else if (pullUpEl.className.match('loading')) {\r\n\t\t\t\tpullUpEl.className = '';\r\n\t\t\t\tpullUpEl.querySelector('.pullUpLabel').innerHTML = '';\r\n\t\t\t}\r\n\t\t\tpullUpEl.style.display='none';\r\n\t\t\tpullDownEl.style.display='none';\r\n\t\t},\r\n\t\tonScrollMove: function () {\r\n\t\t\tpullUpEl.style.display='block';\r\n\t\t\t//pullDownEl.style.display='block';\r\n\t\t\tif (this.y > 5 && !pullDownEl.className.match('flip')) {\r\n\t\t\t\tpullDownEl.className = 'flip';\r\n\t\t\t\tpullDownEl.querySelector('.pullDownLabel').innerHTML = '';\r\n\t\t\t\tthis.minScrollY = 0;\r\n\t\t\t} else if (this.y < 5 && pullDownEl.className.match('flip')) {\r\n\t\t\t\tpullDownEl.className = '';\r\n\t\t\t\tpullDownEl.querySelector('.pullDownLabel').innerHTML = '下拉刷新...';\r\n\t\t\t\tthis.minScrollY = -pullDownOffset;\r\n\t\t\t} else if (this.y < (this.maxScrollY - 5) && !pullUpEl.className.match('flip')) {\r\n\t\t\t\tpullUpEl.className = 'flip';\r\n\t\t\t\tpullUpEl.querySelector('.pullUpLabel').innerHTML = '';\r\n\t\t\t\tthis.maxScrollY = this.maxScrollY;\r\n\t\t\t} else if (this.y > (this.maxScrollY + 5) && pullUpEl.className.match('flip')) {\r\n\t\t\t\tpullUpEl.className = '';\r\n\t\t\t\tpullUpEl.querySelector('.pullUpLabel').innerHTML = '';\r\n\t\t\t\tthis.maxScrollY = pullUpOffset;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonScrollEnd: function () {\r\n\t\t\tif (pullDownEl.className.match('flip')) {\r\n\t\t\t\tpullDownEl.className = 'loading';\r\n\t\t\t\tpullDownEl.querySelector('.pullDownLabel').innerHTML = '';\r\n\t\t\t\tpullDownAction();\t// Execute custom function (ajax call?)\r\n\t\t\t} else if (pullUpEl.className.match('flip')) {\r\n\t\t\t\tpullUpEl.className = 'loading';\r\n\t\t\t\tpullUpEl.querySelector('.pullUpLabel').innerHTML = '';\r\n\t\t\t\tpullUpAction();\t// Execute custom function (ajax call?)\r\n\t\t\t}\r\n\t\t},\r\n\t\tonTouchEnd: function(){\r\n\t\t\tif (this.y > 5 && !pullDownEl.className.match('flip')) {\r\n\t\t\t\tpullDownEl.className = 'flip';\r\n\t\t\t\tpullDownEl.querySelector('.pullDownLabel').innerHTML = '';\r\n\t\t\t\tthis.minScrollY = 0;\r\n\t\t\t} else if (this.y < 5 && pullDownEl.className.match('flip')) {\r\n\t\t\t\tpullDownEl.className = '';\r\n\t\t\t\tpullDownEl.querySelector('.pullDownLabel').innerHTML = '下拉刷新...';\r\n\t\t\t\tthis.minScrollY = -pullDownOffset;\r\n\t\t\t} else if (this.y < (this.maxScrollY - 5) && !pullUpEl.className.match('flip')) {\r\n\t\t\t\tpullUpEl.className = 'flip';\r\n\t\t\t\tpullUpEl.querySelector('.pullUpLabel').innerHTML = '';\r\n\t\t\t\tthis.maxScrollY = this.maxScrollY;\r\n\t\t\t} else if (this.y > (this.maxScrollY + 5) && pullUpEl.className.match('flip')) {\r\n\t\t\t\tpullUpEl.className = '';\r\n\t\t\t\tpullUpEl.querySelector('.pullUpLabel').innerHTML = '';\r\n\t\t\t\tthis.maxScrollY = pullUpOffset;\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tsetTimeout(function () { document.getElementById(renderId).style.left = '0'; }, 800);\r\n}"]}