{"version":3,"sources":["search.js"],"names":[],"mappings":"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","file":"search-compiled.js","sourcesContent":["$(function(){\r\n    setTimeout(function(){\r\n        $('#goodSearchId').focus();\r\n    }, 300);\r\n\r\n    var href = 'html/customer/search/search-result.html?'+document.location.href.split('?')[1];\r\n    console.info(href);\r\n    localStorage.setItem('searchPage', href);\r\n    $('#back').attr('href','html/customer/index.html?storeId='+localStorage.getItem(\"shopId\")+'&type=weixinIndex&userId='+localStorage.getItem(\"userid\"));\r\n});\r\n\r\n$('#goodSearchId').bind('keydown', function (event) {\r\n    if (event.keyCode == \"13\") {\r\n        goodSearchSaveStroage();\r\n        searchCancelClickEvents(0)\r\n    }\r\n});\r\n//监听搜索框变化事件,以切换搜索与取消显示\r\n$('#goodSearchId').bind('input propertychange', function (event) {\r\n    goodSearchAndCancelShow();\r\n});\r\n//搜索框得到焦点事件，显示历史搜索记录,最多显示10个\r\nfunction goodSearchFocus() {\r\n    var storage = window.localStorage;\r\n    $(\"#goodSearchListview li:gt(0)\").remove();\r\n    console.log('--------------------------');\r\n    for(var j = storage.length-1; j >= 0; j--) {\r\n        var key = storage.key(j);\r\n        var value = storage.getItem(key);\r\n        if(key.indexOf('search_') != -1) {\r\n            console.log(key+ ':' +value);\r\n            var keystr = \"'\"+key+\"'\";\r\n            var list = '<li><span onclick=\"searchHositoryClick(this)\" style=\"width: 80%;display: inline-block;\">'+value\r\n                +'</span><span><a href=\"#\" class=\"\" onclick=\"goodSearchRemoveStroage('+keystr+',this)\"></a></span></li>';\r\n            $(\"#goodSearchListview\").append(list);\r\n        }\r\n    }\r\n    $('#goodSearchListview').listview('refresh');\r\n}\r\n//切换搜索与取消隐藏显示\r\nfunction goodSearchAndCancelShow() {\r\n    var searchVal = $('#goodSearchId').val();\r\n    if(searchVal != null && searchVal != ''){\r\n        $(\"#cancelAId\").hide();\r\n        $(\"#searchAId\").show();\r\n    }else{\r\n        $(\"#cancelAId\").show();\r\n        $(\"#searchAId\").hide();\r\n    }\r\n}\r\n// 保存搜索记录\r\nfunction goodSearchSaveStroage() {\r\n    var searchVal = $('#goodSearchId').val();\r\n    if(searchVal != null && searchVal != '') {\r\n        var storage = window.localStorage;\r\n        storage.setItem(\"search_\"+(new Date().getTime()),$('#goodSearchId').val());\r\n    }\r\n}\r\n// 移除单个搜索记录\r\nfunction goodSearchRemoveStroage(key,obj){\r\n    var storage = window.localStorage;\r\n    storage.removeItem(key);\r\n    $(obj).parent().remove();\r\n}\r\n// 点击取消或搜索事件，取消则返回上首页，搜索则保存搜索记录及显示搜索结果\r\nfunction searchCancelClickEvents(type){\r\n    if(type == 1){\r\n        document.location.href=\"html/customer/index.html\";\r\n    }else{\r\n        goodSearchSaveStroage();\r\n        document.location.href=\"html/customer/search/search-noresult.html?searchTitle=搜索&&searchText=\"+$('#goodSearchId').val();\r\n    }\r\n}\r\nfunction searchHositoryClick(obj){\r\n    $('#goodSearchId').val($(obj).text());\r\n    document.location.href=\"html/customer/search/search-noresult.html?searchTitle=搜索&&searchText=\"+$('#goodSearchId').val();\r\n}\r\n$('#clearHository').bind('click', function (event) {\r\n    window.localStorage.clear();\r\n});"]}