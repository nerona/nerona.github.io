{"version":3,"sources":["judge.js"],"names":[],"mappings":"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","file":"judge-compiled.js","sourcesContent":["$(function(){\r\n    customer.judge.init();\r\n    $(\".judge-main-score img\").on(\"click\", function(){\r\n        var index = $(this).attr(\"index\");\r\n        localStorage.setItem('score', parseInt(index)+1);\r\n        $(this).parent().find(\"img\").each(function(i){\r\n            if(i<=index){\r\n                $(this).attr(\"src\",\"images/hdpi/wddd_pj_xx.png\");\r\n            }else{\r\n                $(this).attr(\"src\",\"images/hdpi/wddd_pj.png\");\r\n            }\r\n        });\r\n    });\r\n    /*var $input = $('<input type=\"file\" accept=\"image/!*\" name=\"judge-images\" id=\"selectPic\">');\r\n    var upload_img = '';\r\n    $('#add_img').on('click', function(){\r\n        $('.judge-content-dl').append($input);\r\n        setTimeout(function(){\r\n            $('#selectPic').click();\r\n        }, 1);\r\n        $('#selectPic').change(function(){\r\n            var src = window.URL.createObjectURL(document.getElementById('selectPic').files[0]);\r\n            console.log(src);\r\n            var $img = '<img src=\"' + src + '\" style=\"margin-right: 2%;\">';\r\n            $('.images-list').prepend($img);\r\n            $input.remove();\r\n            upload_img += src + ',';\r\n            //upload_img = upload_img.substr(0, upload_img.length - 1);\r\n            localStorage.setItem('upload_img', upload_img);\r\n        });\r\n    });*/\r\n});\r\nvar customer = customer || {};\r\ncustomer.judge = {\r\n    init: function(){\r\n        var data = Util.common.getParameter('goodModel');\r\n        var result = JSON.parse(data);\r\n        for(var i=0;i<result.length;i++) {\r\n            result[i].num = i+1;\r\n        }\r\n        console.log(result);\r\n        customer.judge.loadTemplate('#judge-info', '#good-info-t', result);\r\n    },\r\n    loadTemplate: function (render, templateId, data) {\r\n        $(render).html($(templateId).tmpl(data));\r\n    },\r\n    submit: function(){\r\n        var userid = localStorage.getItem('userid');\r\n        var username = localStorage.getItem('nickname');\r\n        var url = Util.common.baseUrl+ \"/weixin/good/addEvaluation.do\";\r\n        var model = JSON.parse(Util.common.getParameter('goodModel'));\r\n        for (var i = 0, len = model.length; i < len; i++) {\r\n            var modelJson = {};\r\n            var goodSkuId = model[i].goodSkuId;\r\n            var score = localStorage.getItem('score') || 5;\r\n            var content = $('.judge-content-dl textarea')[i].value;\r\n            var logos = localStorage.getItem('img_list_'+[i+1]).split(',');\r\n            console.log(logos);\r\n            var logo1 = localStorage.getItem('img_list_'+[i+1]);\r\n            modelJson.goodSkuid = goodSkuId;\r\n            modelJson.user = userid;\r\n            if($('#nm-judge-radio').is(':checked')){\r\n                modelJson.username = \"匿名\";\r\n            } else {\r\n                modelJson.username = username;\r\n            }\r\n            modelJson.content = content;\r\n            modelJson.score = score;\r\n            modelJson.indentId = model[i].indentId;\r\n            var param = {\"modelJson\": JSON.stringify(modelJson), \"logo1\": logo1};\r\n            console.log(modelJson);\r\n            Util.common.executeAjaxCallback(url, param, function (data) {\r\n                console.log(data);\r\n                if (data.success == true) {\r\n                    Util.msg.show('msgId', \"评价成功，跳转中...\");\r\n                    setTimeout(function () {\r\n                        document.location.href = 'html/customer/order/index.html';\r\n                    }, 2000);\r\n                }\r\n            });\r\n        }\r\n    }\r\n};\r\n"]}