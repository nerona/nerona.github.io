{"version":3,"sources":["qiniu.js"],"names":[],"mappings":"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","file":"qiniu-compiled.js","sourcesContent":["/*!\n * qiniu-js-sdk v@VERSION\n *\n * Copyright 2015 by Qiniu\n * Released under GPL V2 License.\n *\n * GitHub: http://github.com/qiniu/js-sdk\n *\n * Date: @DATE\n*/\n\n/*global plupload ,mOxie*/\n/*global ActiveXObject */\n/*exported Qiniu */\n/*exported QiniuJsSDK */\n\n;(function( global ){\n\n/**\n * Creates new cookie or removes cookie with negative expiration\n * @param  key       The key or identifier for the store\n * @param  value     Contents of the store\n * @param  exp       Expiration - creation defaults to 30 days\n */\nfunction createCookie(key, value, exp) {\n    var date = new Date();\n    date.setTime(date.getTime() + (exp * 24 * 60 * 60 * 1000));\n    var expires = \"; expires=\" + date.toGMTString();\n    document.cookie = key + \"=\" + value + expires + \"; path=/\";\n}\n\n/**\n * Returns contents of cookie\n * @param  key       The key or identifier for the store\n */\nfunction readCookie(key) {\n    var nameEQ = key + \"=\";\n    var ca = document.cookie.split(';');\n    for (var i = 0, max = ca.length; i < max; i++) {\n        var c = ca[i];\n        while (c.charAt(0) === ' ') {\n            c = c.substring(1, c.length);\n        }\n        if (c.indexOf(nameEQ) === 0) {\n            return c.substring(nameEQ.length, c.length);\n        }\n    }\n    return null;\n}\n\n// if current browser is not support localStorage\n// use cookie to make a polyfill\nif ( !window.localStorage ) {\n    window.localStorage = {\n        setItem: function (key, value) {\n            createCookie(key, value, 30);\n        },\n        getItem: function (key) {\n            return readCookie(key);\n        },\n        removeItem: function (key) {\n            createCookie(key, '', -1);\n        }\n    };\n}\n\nfunction QiniuJsSDK() {\n\n    var that = this;\n\n    /**\n     * detect IE version\n     * if current browser is not IE\n     *     it will return false\n     * else\n     *     it will return version of current IE browser\n     * @return {Number|Boolean} IE version or false\n     */\n    this.detectIEVersion = function() {\n        var v = 4,\n            div = document.createElement('div'),\n            all = div.getElementsByTagName('i');\n        while (\n            div.innerHTML = '<!--[if gt IE ' + v + ']><i></i><![endif]-->',\n            all[0]\n        ) {\n            v++;\n        }\n        return v > 4 ? v : false;\n    };\n\n    var logger = {\n        MUTE: 0,\n        FATA: 1,\n        ERROR: 2,\n        WARN: 3,\n        INFO: 4,\n        DEBUG: 5,\n        TRACE: 6,\n        level: 0\n    };\n\n    function log(type, args){\n        var header = \"[qiniu-js-sdk][\"+type+\"]\";\n        var msg = header;\n        for (var i = 0; i < args.length; i++) {\n            if (typeof args[i] === \"string\") {\n                msg += \" \" + args[i];\n            } else {\n                msg += \" \" + that.stringifyJSON(args[i]);\n            }\n        }\n        if (that.detectIEVersion()) {\n            // http://stackoverflow.com/questions/5538972/console-log-apply-not-working-in-ie9\n            //var log = Function.prototype.bind.call(console.log, console);\n            //log.apply(console, args);\n            console.log(msg);\n        }else{\n            args.unshift(header);\n            console.log.apply(console, args);\n        }\n        if (document.getElementById('qiniu-js-sdk-log')) {\n            document.getElementById('qiniu-js-sdk-log').innerHTML += '<p>'+msg+'</p>';\n        }\n    }\n\n    function makeLogFunc(code){\n        var func = code.toLowerCase();\n        logger[func] = function(){\n            // logger[func].history = logger[func].history || [];\n            // logger[func].history.push(arguments);\n            if(window.console && window.console.log && logger.level>=logger[code]){\n                var args = Array.prototype.slice.call(arguments);\n                log(func,args);\n            }\n        };\n    }\n\n    for (var property in logger){\n        if (logger.hasOwnProperty(property) && (typeof logger[property]) === \"number\" && !logger.hasOwnProperty(property.toLowerCase())) {\n            makeLogFunc(property);\n        }\n    }\n\n\n    var qiniuUploadUrl;\n    if (window.location.protocol === 'https:') {\n        qiniuUploadUrl = 'https://up.qbox.me';\n    } else {\n        qiniuUploadUrl = 'http://upload.qiniu.com';\n    }\n\n    /**\n     * qiniu upload urls\n     * 'qiniuUploadUrls' is used to change target when current url is not avaliable\n     * @type {Array}\n     */\n    var qiniuUploadUrls = [\n        \"http://upload.qiniu.com\",\n        \"http://up.qiniu.com\",\n    ];\n\n    var changeUrlTimes = 0;\n\n    /**\n     * reset upload url\n     * if current page protocal is https\n     *     it will always return 'https://up.qbox.me'\n     * else\n     *     it will set 'qiniuUploadUrl' value with 'qiniuUploadUrls' looply\n     */\n    this.resetUploadUrl = function(){\n        if (window.location.protocol === 'https:') {\n            qiniuUploadUrl = 'https://up.qbox.me';\n        } else {\n            var i = changeUrlTimes % qiniuUploadUrls.length;\n            qiniuUploadUrl = qiniuUploadUrls[i];\n            changeUrlTimes++;\n        }\n        logger.debug('resetUploadUrl: '+qiniuUploadUrl);\n    };\n\n    this.resetUploadUrl();\n\n\n    /**\n     * is image\n     * @param  {String}  url of a file\n     * @return {Boolean} file is a image or not\n     */\n    this.isImage = function(url) {\n        url = url.split(/[?#]/)[0];\n        return (/\\.(png|jpg|jpeg|gif|bmp)$/i).test(url);\n    };\n\n    /**\n     * get file extension\n     * @param  {String} filename\n     * @return {String} file extension\n     * @example\n     *     input: test.txt\n     *     output: txt\n     */\n    this.getFileExtension = function(filename) {\n        var tempArr = filename.split(\".\");\n        var ext;\n        if (tempArr.length === 1 || (tempArr[0] === \"\" && tempArr.length === 2)) {\n            ext = \"\";\n        } else {\n            ext = tempArr.pop().toLowerCase(); //get the extension and make it lower-case\n        }\n        return ext;\n    };\n\n    /**\n     * encode string by utf8\n     * @param  {String} string to encode\n     * @return {String} encoded string\n     */\n    this.utf8_encode = function(argString) {\n        // http://kevin.vanzonneveld.net\n        // +   original by: Webtoolkit.info (http://www.webtoolkit.info/)\n        // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n        // +   improved by: sowberry\n        // +    tweaked by: Jack\n        // +   bugfixed by: Onno Marsman\n        // +   improved by: Yves Sucaet\n        // +   bugfixed by: Onno Marsman\n        // +   bugfixed by: Ulrich\n        // +   bugfixed by: Rafal Kukawski\n        // +   improved by: kirilloid\n        // +   bugfixed by: kirilloid\n        // *     example 1: this.utf8_encode('Kevin van Zonneveld');\n        // *     returns 1: 'Kevin van Zonneveld'\n\n        if (argString === null || typeof argString === 'undefined') {\n            return '';\n        }\n\n        var string = (argString + ''); // .replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n');\n        var utftext = '',\n            start, end, stringl = 0;\n\n        start = end = 0;\n        stringl = string.length;\n        for (var n = 0; n < stringl; n++) {\n            var c1 = string.charCodeAt(n);\n            var enc = null;\n\n            if (c1 < 128) {\n                end++;\n            } else if (c1 > 127 && c1 < 2048) {\n                enc = String.fromCharCode(\n                    (c1 >> 6) | 192, (c1 & 63) | 128\n                );\n            } else if (c1 & 0xF800 ^ 0xD800 > 0) {\n                enc = String.fromCharCode(\n                    (c1 >> 12) | 224, ((c1 >> 6) & 63) | 128, (c1 & 63) | 128\n                );\n            } else { // surrogate pairs\n                if (c1 & 0xFC00 ^ 0xD800 > 0) {\n                    throw new RangeError('Unmatched trail surrogate at ' + n);\n                }\n                var c2 = string.charCodeAt(++n);\n                if (c2 & 0xFC00 ^ 0xDC00 > 0) {\n                    throw new RangeError('Unmatched lead surrogate at ' + (n - 1));\n                }\n                c1 = ((c1 & 0x3FF) << 10) + (c2 & 0x3FF) + 0x10000;\n                enc = String.fromCharCode(\n                    (c1 >> 18) | 240, ((c1 >> 12) & 63) | 128, ((c1 >> 6) & 63) | 128, (c1 & 63) | 128\n                );\n            }\n            if (enc !== null) {\n                if (end > start) {\n                    utftext += string.slice(start, end);\n                }\n                utftext += enc;\n                start = end = n + 1;\n            }\n        }\n\n        if (end > start) {\n            utftext += string.slice(start, stringl);\n        }\n\n        return utftext;\n    };\n\n    /**\n     * encode data by base64\n     * @param  {String} data to encode\n     * @return {String} encoded data\n     */\n    this.base64_encode = function(data) {\n        // http://kevin.vanzonneveld.net\n        // +   original by: Tyler Akins (http://rumkin.com)\n        // +   improved by: Bayron Guevara\n        // +   improved by: Thunder.m\n        // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n        // +   bugfixed by: Pellentesque Malesuada\n        // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n        // -    depends on: this.utf8_encode\n        // *     example 1: this.base64_encode('Kevin van Zonneveld');\n        // *     returns 1: 'S2V2aW4gdmFuIFpvbm5ldmVsZA=='\n        // mozilla has this native\n        // - but breaks in 2.0.0.12!\n        //if (typeof this.window['atob'] == 'function') {\n        //    return atob(data);\n        //}\n        var b64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n        var o1, o2, o3, h1, h2, h3, h4, bits, i = 0,\n            ac = 0,\n            enc = '',\n            tmp_arr = [];\n\n        if (!data) {\n            return data;\n        }\n\n        data = this.utf8_encode(data + '');\n\n        do { // pack three octets into four hexets\n            o1 = data.charCodeAt(i++);\n            o2 = data.charCodeAt(i++);\n            o3 = data.charCodeAt(i++);\n\n            bits = o1 << 16 | o2 << 8 | o3;\n\n            h1 = bits >> 18 & 0x3f;\n            h2 = bits >> 12 & 0x3f;\n            h3 = bits >> 6 & 0x3f;\n            h4 = bits & 0x3f;\n\n            // use hexets to index into b64, and append result to encoded string\n            tmp_arr[ac++] = b64.charAt(h1) + b64.charAt(h2) + b64.charAt(h3) + b64.charAt(h4);\n        } while (i < data.length);\n\n        enc = tmp_arr.join('');\n\n        switch (data.length % 3) {\n            case 1:\n                enc = enc.slice(0, -2) + '==';\n                break;\n            case 2:\n                enc = enc.slice(0, -1) + '=';\n                break;\n        }\n\n        return enc;\n    };\n\n    /**\n     * encode string in url by base64\n     * @param {String} string in url\n     * @return {String} encoded string\n     */\n    this.URLSafeBase64Encode = function(v) {\n        v = this.base64_encode(v);\n        return v.replace(/\\//g, '_').replace(/\\+/g, '-');\n    };\n\n    // TODO: use mOxie\n    /**\n     * craete object used to AJAX\n     * @return {Object}\n     */\n    this.createAjax = function(argument) {\n        var xmlhttp = {};\n        if (window.XMLHttpRequest) {\n            xmlhttp = new XMLHttpRequest();\n        } else {\n            xmlhttp = new ActiveXObject(\"Microsoft.XMLHTTP\");\n        }\n        return xmlhttp;\n    };\n\n    // TODO: enhance IE compatibility\n    /**\n     * parse json string to javascript object\n     * @param  {String} json string\n     * @return {Object} object\n     */\n    this.parseJSON = function(data) {\n        // Attempt to parse using the native JSON parser first\n        if (window.JSON && window.JSON.parse) {\n            return window.JSON.parse(data);\n        }\n\n        //var rx_one = /^[\\],:{}\\s]*$/,\n        //    rx_two = /\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g,\n        //    rx_three = /\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g,\n        //    rx_four = /(?:^|:|,)(?:\\s*\\[)+/g,\n        var    rx_dangerous = /[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g;\n\n        //var json;\n\n        var text = String(data);\n        rx_dangerous.lastIndex = 0;\n        if(rx_dangerous.test(text)){\n            text = text.replace(rx_dangerous, function(a){\n               return '\\\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n            });\n        }\n\n        // todo 使用一下判断,增加安全性\n        //if (\n        //    rx_one.test(\n        //        text\n        //            .replace(rx_two, '@')\n        //            .replace(rx_three, ']')\n        //            .replace(rx_four, '')\n        //    )\n        //) {\n        //    return eval('(' + text + ')');\n        //}\n\n        return eval('('+text+')');\n    };\n\n    /**\n     * parse javascript object to json string\n     * @param  {Object} object\n     * @return {String} json string\n     */\n    this.stringifyJSON = function(obj) {\n        // Attempt to parse using the native JSON parser first\n        if (window.JSON && window.JSON.stringify) {\n            return window.JSON.stringify(obj);\n        }\n        switch (typeof (obj)) {\n            case 'string':\n                return '\"' + obj.replace(/([\"\\\\])/g, '\\\\$1') + '\"';\n            case 'array':\n                return '[' + obj.map(that.stringifyJSON).join(',') + ']';\n            case 'object':\n                if (obj instanceof Array) {\n                    var strArr = [];\n                    var len = obj.length;\n                    for (var i = 0; i < len; i++) {\n                        strArr.push(that.stringifyJSON(obj[i]));\n                    }\n                    return '[' + strArr.join(',') + ']';\n                } else if (obj === null) {\n                    return 'null';\n                } else {\n                    var string = [];\n                    for (var property in obj) {\n                        if (obj.hasOwnProperty(property)) {\n                            string.push(that.stringifyJSON(property) + ':' + that.stringifyJSON(obj[property]));\n                        }\n                    }\n                    return '{' + string.join(',') + '}';\n                }\n                break;\n            case 'number':\n                return obj;\n            case false:\n                return obj;\n            case 'boolean':\n                return obj;\n        }\n    };\n\n    /**\n     * trim space beside text\n     * @param  {String} untrimed string\n     * @return {String} trimed string\n     */\n    this.trim = function(text) {\n        return text === null ? \"\" : text.replace(/^\\s+|\\s+$/g, '');\n    };\n\n    /**\n     * create a uploader by QiniuJsSDK\n     * @param  {object} options to create a new uploader\n     * @return {object} uploader\n     */\n    this.uploader = function(op) {\n\n        /********** inner function define start **********/\n\n        // according the different condition to reset chunk size\n        // and the upload strategy according with the chunk size\n        // when chunk size is zero will cause to direct upload\n        // see the statement binded on 'BeforeUpload' event\n        var reset_chunk_size = function() {\n            var ie = that.detectIEVersion();\n            var BLOCK_BITS, MAX_CHUNK_SIZE, chunk_size;\n            // case Safari 5、Windows 7、iOS 7 set isSpecialSafari to true\n            var isSpecialSafari = (mOxie.Env.browser === \"Safari\" && mOxie.Env.version <= 5 && mOxie.Env.os === \"Windows\" && mOxie.Env.osVersion === \"7\") || (mOxie.Env.browser === \"Safari\" && mOxie.Env.os === \"iOS\" && mOxie.Env.osVersion === \"7\");\n            // case IE 9-，chunk_size is not empty and flash is included in runtimes\n            // set op.chunk_size to zero\n            //if (ie && ie <= 9 && op.chunk_size && op.runtimes.indexOf('flash') >= 0) {\n            if (ie && ie <= 9 && op.chunk_size && op.runtimes.indexOf('flash') < 0) {\n                //  link: http://www.plupload.com/docs/Frequently-Asked-Questions#when-to-use-chunking-and-when-not\n                //  when plupload chunk_size setting is't null ,it cause bug in ie8/9  which runs  flash runtimes (not support html5) .\n                op.chunk_size = 0;\n            } else if (isSpecialSafari) {\n                // win7 safari / iOS7 safari have bug when in chunk upload mode\n                // reset chunk_size to 0\n                // disable chunk in special version safari\n                op.chunk_size = 0;\n            } else {\n                BLOCK_BITS = 20;\n                MAX_CHUNK_SIZE = 4 << BLOCK_BITS; //4M\n\n                chunk_size = plupload.parseSize(op.chunk_size);\n                if (chunk_size > MAX_CHUNK_SIZE) {\n                    op.chunk_size = MAX_CHUNK_SIZE;\n                }\n                // qiniu service  max_chunk_size is 4m\n                // reset chunk_size to max_chunk_size(4m) when chunk_size > 4m\n            }\n            // if op.chunk_size set 0 will be cause to direct upload\n        };\n\n        // getUptoken maybe called at Init Event or BeforeUpload Event\n        // case Init Event, the file param of getUptken will be set a null value\n        // if op.uptoken has value, set uptoken with op.uptoken\n        // else if op.uptoken_url has value, set uptoken from op.uptoken_url\n        // else if op.uptoken_func has value, set uptoken by result of op.uptoken_func\n        var getUpToken = function(file) {\n            if (op.uptoken) {\n                that.token = op.uptoken;\n                return;\n            } else if (op.uptoken_url) {\n                logger.debug(\"get uptoken from: \", that.uptoken_url);\n                // TODO: use mOxie\n                var ajax = that.createAjax();\n                ajax.open('GET', that.uptoken_url, false);\n                ajax.setRequestHeader(\"If-Modified-Since\", \"0\");\n                // ajax.onreadystatechange = function() {\n                //     if (ajax.readyState === 4 && ajax.status === 200) {\n                //         var res = that.parseJSON(ajax.responseText);\n                //         that.token = res.uptoken;\n                //     }\n                // };\n                ajax.send();\n                if (ajax.status === 200) {\n                    var res = that.parseJSON(ajax.responseText);\n                    that.token = res.uptoken;\n                    logger.debug(\"get new uptoken: \", res.uptoken);\n                } else {\n                    logger.error(\"get uptoken error: \", ajax.responseText);\n                }\n                return;\n            } else if (op.uptoken_func) {\n                logger.debug(\"get uptoken from uptoken_func\");\n                that.token = op.uptoken_func(file);\n                logger.debug(\"get new uptoken: \", that.token);\n                return;\n            } else {\n                logger.error(\"one of [uptoken, uptoken_url, uptoken_func] settings in options is required!\");\n            }\n        };\n\n        // get file key according with the user passed options\n        var getFileKey = function(up, file, func) {\n            // TODO: save_key can read from scope of token\n            var key = '',\n                unique_names = false;\n            if (!op.save_key) {\n                unique_names = up.getOption && up.getOption('unique_names');\n                unique_names = unique_names || (up.settings && up.settings.unique_names);\n                if (unique_names) {\n                    var ext = that.getFileExtension(file.name);\n                    key = ext ? file.id + '.' + ext : file.id;\n                } else if (typeof func === 'function') {\n                    key = func(up, file);\n                } else {\n                    key = file.name;\n                }\n            }\n            return key;\n        };\n\n        /********** inner function define end **********/\n\n        if (op.log_level) {\n            logger.level = op.log_level;\n        }\n\n        if (!op.domain) {\n            throw 'domain setting in options is required!';\n        }\n\n        if (!op.browse_button) {\n            throw 'browse_button setting in options is required!';\n        }\n\n        if (!op.uptoken && !op.uptoken_url && !op.uptoken_func) {\n            throw 'one of [uptoken, uptoken_url, uptoken_func] settings in options is required!';\n        }\n\n        logger.debug(\"init uploader start\");\n\n        logger.debug(\"environment: \", mOxie.Env);\n\n        logger.debug(\"userAgent: \", navigator.userAgent);\n\n        var option = {};\n\n        // hold the handler from user passed options\n        var _Error_Handler = op.init && op.init.Error;\n        var _FileUploaded_Handler = op.init && op.init.FileUploaded;\n\n        // replace the handler for intercept\n        op.init.Error = function() {};\n        op.init.FileUploaded = function() {};\n\n        that.uptoken_url = op.uptoken_url;\n        that.token = '';\n        that.key_handler = typeof op.init.Key === 'function' ? op.init.Key : '';\n        this.domain = op.domain;\n        // TODO: ctx is global in scope of a uploader instance\n        // this maybe cause error\n        var ctx = '';\n        var speedCalInfo = {\n            isResumeUpload: false,\n            resumeFilesize: 0,\n            startTime: '',\n            currentTime: ''\n        };\n\n        reset_chunk_size();\n        logger.debug(\"invoke reset_chunk_size()\");\n        logger.debug(\"op.chunk_size: \", op.chunk_size);\n\n        // compose options with user passed options and default setting\n        plupload.extend(option, op, {\n            url: qiniuUploadUrl,\n            multipart_params: {\n                token: ''\n            }\n        });\n\n        logger.debug(\"option: \", option);\n\n        // create a new uploader with composed options\n        var uploader = new plupload.Uploader(option);\n\n        logger.debug(\"new plupload.Uploader(option)\");\n\n        // bind getUpToken to 'Init' event\n        uploader.bind('Init', function(up, params) {\n            logger.debug(\"Init event activated\");\n            // if op.get_new_uptoken is not true\n            //      invoke getUptoken when uploader init\n            // else\n            //      getUptoken everytime before a new file upload\n            if(!op.get_new_uptoken){\n                getUpToken(null);\n            }\n            //getUpToken(null);\n        });\n\n        logger.debug(\"bind Init event\");\n\n        // bind 'FilesAdded' event\n        // when file be added and auto_start has set value\n        // uploader will auto start upload the file\n        uploader.bind('FilesAdded', function(up, files) {\n            logger.debug(\"FilesAdded event activated\");\n            var auto_start = up.getOption && up.getOption('auto_start');\n            auto_start = auto_start || (up.settings && up.settings.auto_start);\n            logger.debug(\"auto_start: \", auto_start);\n            logger.debug(\"files: \", files);\n\n            // detect is iOS\n            var is_ios = function (){\n                if(mOxie.Env.OS.toLowerCase()===\"ios\") {\n                    return true;\n                } else {\n                    return false;\n                }\n            };\n\n            // if current env os is iOS change file name to [time].[ext]\n            if (is_ios()) {\n                for (var i = 0; i < files.length; i++) {\n                    var file = files[i];\n                    var ext = that.getFileExtension(file.name);\n                    file.name = file.id + \".\" + ext;\n                }\n            }\n\n            if (auto_start) {\n                setTimeout(function(){\n                    up.start();\n                    logger.debug(\"invoke up.start()\");\n                }, 0);\n                // up.start();\n                // plupload.each(files, function(i, file) {\n                //     up.start();\n                //     logger.debug(\"invoke up.start()\")\n                //     logger.debug(\"file: \", file);\n                // });\n            }\n            up.refresh(); // Reposition Flash/Silverlight\n        });\n\n        logger.debug(\"bind FilesAdded event\");\n\n        // bind 'BeforeUpload' event\n        // intercept the process of upload\n        // - prepare uptoken\n        // - according the chunk size to make differnt upload strategy\n        // - resume upload with the last breakpoint of file\n        uploader.bind('BeforeUpload', function(up, file) {\n            logger.debug(\"BeforeUpload event activated\");\n            // add a key named speed for file object\n            file.speed = file.speed || 0;\n            ctx = '';\n\n            if(op.get_new_uptoken){\n                getUpToken(file);\n            }\n\n            var directUpload = function(up, file, func) {\n                speedCalInfo.startTime = new Date().getTime();\n                var multipart_params_obj;\n                if (op.save_key) {\n                    multipart_params_obj = {\n                        'token': that.token\n                    };\n                } else {\n                    multipart_params_obj = {\n                        'key': getFileKey(up, file, func),\n                        'token': that.token\n                    };\n                }\n\n                logger.debug(\"directUpload multipart_params_obj: \", multipart_params_obj);\n\n                var x_vars = op.x_vars;\n                if (x_vars !== undefined && typeof x_vars === 'object') {\n                    for (var x_key in x_vars) {\n                        if (x_vars.hasOwnProperty(x_key)) {\n                            if (typeof x_vars[x_key] === 'function') {\n                                multipart_params_obj['x:' + x_key] = x_vars[x_key](up, file);\n                            } else if (typeof x_vars[x_key] !== 'object') {\n                                multipart_params_obj['x:' + x_key] = x_vars[x_key];\n                            }\n                        }\n                    }\n                }\n\n\n                up.setOption({\n                    'url': qiniuUploadUrl,\n                    'multipart': true,\n                    'chunk_size': is_android_weixin_or_qq() ? op.max_file_size : undefined,\n                    'multipart_params': multipart_params_obj\n                });\n            };\n\n            // detect is weixin or qq inner browser\n            var is_android_weixin_or_qq = function (){\n                var ua = navigator.userAgent.toLowerCase();\n                if((ua.match(/MicroMessenger/i) || mOxie.Env.browser === \"QQBrowser\" || ua.match(/V1_AND_SQ/i)) && mOxie.Env.OS.toLowerCase()===\"android\") {\n                    return true;\n                } else {\n                    return false;\n                }\n            };\n\n            var chunk_size = up.getOption && up.getOption('chunk_size');\n            chunk_size = chunk_size || (up.settings && up.settings.chunk_size);\n\n            logger.debug(\"uploader.runtime: \",uploader.runtime);\n            logger.debug(\"chunk_size: \",chunk_size);\n\n            // TODO: flash support chunk upload\n            if ((uploader.runtime === 'html5' || uploader.runtime === 'flash') && chunk_size) {\n                if (file.size < chunk_size || is_android_weixin_or_qq()) {\n                    logger.debug(\"directUpload because file.size < chunk_size || is_android_weixin_or_qq()\");\n                    // direct upload if file size is less then the chunk size\n                    directUpload(up, file, that.key_handler);\n                } else {\n                    // TODO: need a polifill to make it work in IE 9-\n                    // ISSUE: if file.name is existed in localStorage \n                    // but not the same file maybe cause error\n                    var localFileInfo = localStorage.getItem(file.name);\n                    var blockSize = chunk_size;\n                    if (localFileInfo) {\n                        // TODO: although only the html5 runtime will enter this statement\n                        // but need uniform way to make convertion between string and json\n                        localFileInfo = that.parseJSON(localFileInfo);\n                        var now = (new Date()).getTime();\n                        var before = localFileInfo.time || 0;\n                        var aDay = 24 * 60 * 60 * 1000; //  milliseconds of one day\n                        // if the last upload time is within one day\n                        //      will upload continuously follow the last breakpoint\n                        // else\n                        //      will reupload entire file\n                        if (now - before < aDay) {\n\n                            if (localFileInfo.percent !== 100) {\n                                if (file.size === localFileInfo.total) {\n                                    // TODO: if file.name and file.size is the same \n                                    // but not the same file will cause error\n                                    file.percent = localFileInfo.percent;\n                                    file.loaded = localFileInfo.offset;\n                                    ctx = localFileInfo.ctx;\n\n                                    // set speed info\n                                    speedCalInfo.isResumeUpload = true;\n                                    speedCalInfo.resumeFilesize = localFileInfo.offset;\n\n                                    // set block size\n                                    if (localFileInfo.offset + blockSize > file.size) {\n                                        blockSize = file.size - localFileInfo.offset;\n                                    }\n                                } else {\n                                    // remove file info when file.size is conflict with file info\n                                    localStorage.removeItem(file.name);\n                                }\n\n                            } else {\n                                // remove file info when upload percent is 100%\n                                // avoid 499 bug\n                                localStorage.removeItem(file.name);\n                            }\n                        } else {\n                            // remove file info when last upload time is over one day\n                            localStorage.removeItem(file.name);\n                        }\n                    }\n                    speedCalInfo.startTime = new Date().getTime();\n                    // TODO: to support bput\n                    // http://developer.qiniu.com/docs/v6/api/reference/up/bput.html\n                    up.setOption({\n                        'url': qiniuUploadUrl + '/mkblk/' + blockSize,\n                        'multipart': false,\n                        'chunk_size': chunk_size,\n                        'required_features': \"chunks\",\n                        'headers': {\n                            'Authorization': 'UpToken ' + that.token\n                        },\n                        'multipart_params': {}\n                    });\n                }\n            } else {\n                logger.debug(\"directUpload because uploader.runtime !== 'html5' || uploader.runtime !== 'flash' || !chunk_size\");\n                // direct upload if runtime is not html5\n                directUpload(up, file, that.key_handler);\n            }\n        });\n\n        logger.debug(\"bind BeforeUpload event\");\n\n        // bind 'UploadProgress' event\n        // calculate upload speed\n        uploader.bind('UploadProgress', function(up, file) {\n            logger.trace(\"UploadProgress event activated\");\n            speedCalInfo.currentTime = new Date().getTime();\n            var timeUsed = speedCalInfo.currentTime - speedCalInfo.startTime; // ms\n            var fileUploaded = file.loaded || 0;\n            if (speedCalInfo.isResumeUpload) {\n                fileUploaded = file.loaded - speedCalInfo.resumeFilesize;\n            }\n            file.speed = (fileUploaded / timeUsed * 1000).toFixed(0) || 0; // unit: byte/s\n        });\n\n        logger.debug(\"bind UploadProgress event\");\n\n        // bind 'ChunkUploaded' event\n        // store the chunk upload info and set next chunk upload url\n        uploader.bind('ChunkUploaded', function(up, file, info) {\n            logger.debug(\"ChunkUploaded event activated\");\n            logger.debug(\"file: \", file);\n            logger.debug(\"info: \", info);\n            var res = that.parseJSON(info.response);\n            logger.debug(\"res: \", res);\n            // ctx should look like '[chunk01_ctx],[chunk02_ctx],[chunk03_ctx],...'\n            ctx = ctx ? ctx + ',' + res.ctx : res.ctx;\n            var leftSize = info.total - info.offset;\n            var chunk_size = up.getOption && up.getOption('chunk_size');\n            chunk_size = chunk_size || (up.settings && up.settings.chunk_size);\n            if (leftSize < chunk_size) {\n                up.setOption({\n                    'url': qiniuUploadUrl + '/mkblk/' + leftSize\n                });\n                logger.debug(\"up.setOption url: \", qiniuUploadUrl + '/mkblk/' + leftSize);\n            }\n            localStorage.setItem(file.name, that.stringifyJSON({\n                ctx: ctx,\n                percent: file.percent,\n                total: info.total,\n                offset: info.offset,\n                time: (new Date()).getTime()\n            }));\n        });\n\n        logger.debug(\"bind ChunkUploaded event\");\n\n        var retries = qiniuUploadUrls.length;\n\n        // if error is unkown switch upload url and retry\n        var unknow_error_retry = function(file){\n            if (retries-- > 0) {\n                setTimeout(function(){\n                    that.resetUploadUrl();\n                    file.status = plupload.QUEUED;\n                    uploader.stop();\n                    uploader.start();\n                }, 0);\n                return true;\n            }else{\n                retries = qiniuUploadUrls.length;\n                return false;\n            }\n        };\n\n        // bind 'Error' event\n        // check the err.code and return the errTip\n        uploader.bind('Error', (function(_Error_Handler) {\n            return function(up, err) {\n                logger.error(\"Error event activated\");\n                logger.error(\"err: \", err);\n                var errTip = '';\n                var file = err.file;\n                if (file) {\n                    switch (err.code) {\n                        case plupload.FAILED:\n                            errTip = '上传失败。请稍后再试。';\n                            break;\n                        case plupload.FILE_SIZE_ERROR:\n                            var max_file_size = up.getOption && up.getOption('max_file_size');\n                            max_file_size = max_file_size || (up.settings && up.settings.max_file_size);\n                            errTip = '浏览器最大可上传' + max_file_size + '。更大文件请使用命令行工具。';\n                            break;\n                        case plupload.FILE_EXTENSION_ERROR:\n                            errTip = '文件验证失败。请稍后重试。';\n                            break;\n                        case plupload.HTTP_ERROR:\n                            if (err.response === '') {\n                                // Fix parseJSON error ,when http error is like net::ERR_ADDRESS_UNREACHABLE\n                                errTip = err.message || '未知网络错误。';\n                                if (!unknow_error_retry(file)) {\n                                    return;\n                                }\n                                break;\n                            }\n                            var errorObj = that.parseJSON(err.response);\n                            var errorText = errorObj.error;\n                            switch (err.status) {\n                                case 400:\n                                    errTip = \"请求报文格式错误。\";\n                                    break;\n                                case 401:\n                                    errTip = \"客户端认证授权失败。请重试或提交反馈。\";\n                                    break;\n                                case 405:\n                                    errTip = \"客户端请求错误。请重试或提交反馈。\";\n                                    break;\n                                case 579:\n                                    errTip = \"资源上传成功，但回调失败。\";\n                                    break;\n                                case 599:\n                                    errTip = \"网络连接异常。请重试或提交反馈。\";\n                                    if (!unknow_error_retry(file)) {\n                                        return;\n                                    }\n                                    break;\n                                case 614:\n                                    errTip = \"文件已存在。\";\n                                    try {\n                                        errorObj = that.parseJSON(errorObj.error);\n                                        errorText = errorObj.error || 'file exists';\n                                    } catch (e) {\n                                        errorText = errorObj.error || 'file exists';\n                                    }\n                                    break;\n                                case 631:\n                                    errTip = \"指定空间不存在。\";\n                                    break;\n                                case 701:\n                                    errTip = \"上传数据块校验出错。请重试或提交反馈。\";\n                                    break;\n                                default:\n                                    errTip = \"未知错误。\";\n                                    if (!unknow_error_retry(file)) {\n                                        return;\n                                    }\n                                    break;\n                            }\n                            errTip = errTip + '(' + err.status + '：' + errorText + ')';\n                            break;\n                        case plupload.SECURITY_ERROR:\n                            errTip = '安全配置错误。请联系网站管理员。';\n                            break;\n                        case plupload.GENERIC_ERROR:\n                            errTip = '上传失败。请稍后再试。';\n                            break;\n                        case plupload.IO_ERROR:\n                            errTip = '上传失败。请稍后再试。';\n                            break;\n                        case plupload.INIT_ERROR:\n                            errTip = '网站配置错误。请联系网站管理员。';\n                            uploader.destroy();\n                            break;\n                        default:\n                            errTip = err.message + err.details;\n                            if (!unknow_error_retry(file)) {\n                                return;\n                            }\n                            break;\n                    }\n                    if (_Error_Handler) {\n                        _Error_Handler(up, err, errTip);\n                    }\n                }\n                up.refresh(); // Reposition Flash/Silverlight\n            };\n        })(_Error_Handler));\n\n        logger.debug(\"bind Error event\");\n\n        // bind 'FileUploaded' event\n        // intercept the complete of upload\n        // - get downtoken from downtoken_url if bucket is private\n        // - invoke mkfile api to compose chunks if upload strategy is chunk upload\n        uploader.bind('FileUploaded', (function(_FileUploaded_Handler) {\n            return function(up, file, info) {\n                logger.debug(\"FileUploaded event activated\");\n                logger.debug(\"file: \", file);\n                logger.debug(\"info: \", info);\n                var last_step = function(up, file, info) {\n                    if (op.downtoken_url) {\n                        // if op.dowontoken_url is not empty\n                        // need get downtoken before invoke the _FileUploaded_Handler\n                        var ajax_downtoken = that.createAjax();\n                        ajax_downtoken.open('POST', op.downtoken_url, true);\n                        ajax_downtoken.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\n                        ajax_downtoken.onreadystatechange = function() {\n                            if (ajax_downtoken.readyState === 4) {\n                                if (ajax_downtoken.status === 200) {\n                                    var res_downtoken;\n                                    try {\n                                        res_downtoken = that.parseJSON(ajax_downtoken.responseText);\n                                    } catch (e) {\n                                        throw ('invalid json format');\n                                    }\n                                    var info_extended = {};\n                                    plupload.extend(info_extended, that.parseJSON(info), res_downtoken);\n                                    if (_FileUploaded_Handler) {\n                                        _FileUploaded_Handler(up, file, that.stringifyJSON(info_extended));\n                                    }\n                                } else {\n                                    uploader.trigger('Error', {\n                                        status: ajax_downtoken.status,\n                                        response: ajax_downtoken.responseText,\n                                        file: file,\n                                        code: plupload.HTTP_ERROR\n                                    });\n                                }\n                            }\n                        };\n                        ajax_downtoken.send('key=' + that.parseJSON(info).key + '&domain=' + op.domain);\n                    } else if (_FileUploaded_Handler) {\n                        _FileUploaded_Handler(up, file, info);\n                    }\n                };\n\n                var res = that.parseJSON(info.response);\n                ctx = ctx ? ctx : res.ctx;\n                // if ctx is not empty \n                //      that means the upload strategy is chunk upload\n                //      befroe the invoke the last_step\n                //      we need request the mkfile to compose all uploaded chunks\n                // else\n                //      invalke the last_step\n                logger.debug(\"ctx: \", ctx);\n                if (ctx) {\n                    var key = '';\n                    logger.debug(\"save_key: \", op.save_key);\n                    if (!op.save_key) {\n                        key = getFileKey(up, file, that.key_handler);\n                        key = key ? '/key/' + that.URLSafeBase64Encode(key) : '';\n                    }\n\n                    var fname = '/fname/' + that.URLSafeBase64Encode(file.name);\n\n                    logger.debug(\"op.x_vars: \", op.x_vars);\n                    var x_vars = op.x_vars,\n                        x_val = '',\n                        x_vars_url = '';\n                    if (x_vars !== undefined && typeof x_vars === 'object') {\n                        for (var x_key in x_vars) {\n                            if (x_vars.hasOwnProperty(x_key)) {\n                                if (typeof x_vars[x_key] === 'function') {\n                                    x_val = that.URLSafeBase64Encode(x_vars[x_key](up, file));\n                                } else if (typeof x_vars[x_key] !== 'object') {\n                                    x_val = that.URLSafeBase64Encode(x_vars[x_key]);\n                                }\n                                x_vars_url += '/x:' + x_key + '/' + x_val;\n                            }\n                        }\n                    }\n\n                    var url = qiniuUploadUrl + '/mkfile/' + file.size + key + fname + x_vars_url;\n\n                    var ie = that.detectIEVersion();\n                    var ajax;\n                    if (ie && ie <= 9) {\n                        ajax = new mOxie.XMLHttpRequest();\n                        mOxie.Env.swf_url = op.flash_swf_url;\n                    }else{\n                        ajax = that.createAjax();\n                    }\n                    ajax.open('POST', url, true);\n                    ajax.setRequestHeader('Content-Type', 'text/plain;charset=UTF-8');\n                    ajax.setRequestHeader('Authorization', 'UpToken ' + that.token);\n                    var onreadystatechange = function(){\n                        logger.debug(\"ajax.readyState: \", ajax.readyState);\n                        if (ajax.readyState === 4) {\n                            localStorage.removeItem(file.name);\n                            var info;\n                            if (ajax.status === 200) {\n                                info = ajax.responseText;\n                                logger.debug(\"mkfile is success: \", info);\n                                last_step(up, file, info);\n                            } else {\n                                info = {\n                                    status: ajax.status,\n                                    response: ajax.responseText,\n                                    file: file,\n                                    code: -200\n                                };\n                                logger.debug(\"mkfile is error: \", info);\n                                uploader.trigger('Error', info);\n                            }\n                        }\n                    };\n                    if (ie && ie <= 9) {\n                        ajax.bind('readystatechange', onreadystatechange);\n                    }else{\n                        ajax.onreadystatechange = onreadystatechange;\n                    }\n                    ajax.send(ctx);\n                    logger.debug(\"mkfile: \", url);\n                } else {\n                    last_step(up, file, info.response);\n                }\n\n            };\n        })(_FileUploaded_Handler));\n\n        logger.debug(\"bind FileUploaded event\");\n\n        // init uploader\n        uploader.init();\n\n        logger.debug(\"invoke uploader.init()\");\n\n        logger.debug(\"init uploader end\");\n\n        return uploader;\n    };\n\n    /**\n     * get url by key\n     * @param  {String} key of file\n     * @return {String} url of file\n     */\n    this.getUrl = function(key) {\n        if (!key) {\n            return false;\n        }\n        key = encodeURI(key);\n        var domain = this.domain;\n        if (domain.slice(domain.length - 1) !== '/') {\n            domain = domain + '/';\n        }\n        return domain + key;\n    };\n\n    /**\n     * invoke the imageView2 api of Qiniu\n     * @param  {Object} api params\n     * @param  {String} key of file\n     * @return {String} url of processed image\n     */\n    this.imageView2 = function(op, key) {\n        var mode = op.mode || '',\n            w = op.w || '',\n            h = op.h || '',\n            q = op.q || '',\n            format = op.format || '';\n        if (!mode) {\n            return false;\n        }\n        if (!w && !h) {\n            return false;\n        }\n\n        var imageUrl = 'imageView2/' + mode;\n        imageUrl += w ? '/w/' + w : '';\n        imageUrl += h ? '/h/' + h : '';\n        imageUrl += q ? '/q/' + q : '';\n        imageUrl += format ? '/format/' + format : '';\n        if (key) {\n            imageUrl = this.getUrl(key) + '?' + imageUrl;\n        }\n        return imageUrl;\n    };\n\n    /**\n     * invoke the imageMogr2 api of Qiniu\n     * @param  {Object} api params\n     * @param  {String} key of file\n     * @return {String} url of processed image\n     */\n    this.imageMogr2 = function(op, key) {\n        var auto_orient = op['auto-orient'] || '',\n            thumbnail = op.thumbnail || '',\n            strip = op.strip || '',\n            gravity = op.gravity || '',\n            crop = op.crop || '',\n            quality = op.quality || '',\n            rotate = op.rotate || '',\n            format = op.format || '',\n            blur = op.blur || '';\n        //Todo check option\n\n        var imageUrl = 'imageMogr2';\n\n        imageUrl += auto_orient ? '/auto-orient' : '';\n        imageUrl += thumbnail ? '/thumbnail/' + thumbnail : '';\n        imageUrl += strip ? '/strip' : '';\n        imageUrl += gravity ? '/gravity/' + gravity : '';\n        imageUrl += quality ? '/quality/' + quality : '';\n        imageUrl += crop ? '/crop/' + crop : '';\n        imageUrl += rotate ? '/rotate/' + rotate : '';\n        imageUrl += format ? '/format/' + format : '';\n        imageUrl += blur ? '/blur/' + blur : '';\n\n        if (key) {\n            imageUrl = this.getUrl(key) + '?' + imageUrl;\n        }\n        return imageUrl;\n    };\n\n    /**\n     * invoke the watermark api of Qiniu\n     * @param  {Object} api params\n     * @param  {String} key of file\n     * @return {String} url of processed image\n     */\n    this.watermark = function(op, key) {\n        var mode = op.mode;\n        if (!mode) {\n            return false;\n        }\n\n        var imageUrl = 'watermark/' + mode;\n\n        if (mode === 1) {\n            var image = op.image || '';\n            if (!image) {\n                return false;\n            }\n            imageUrl += image ? '/image/' + this.URLSafeBase64Encode(image) : '';\n        } else if (mode === 2) {\n            var text = op.text ? op.text : '',\n                font = op.font ? op.font : '',\n                fontsize = op.fontsize ? op.fontsize : '',\n                fill = op.fill ? op.fill : '';\n            if (!text) {\n                return false;\n            }\n            imageUrl += text ? '/text/' + this.URLSafeBase64Encode(text) : '';\n            imageUrl += font ? '/font/' + this.URLSafeBase64Encode(font) : '';\n            imageUrl += fontsize ? '/fontsize/' + fontsize : '';\n            imageUrl += fill ? '/fill/' + this.URLSafeBase64Encode(fill) : '';\n        } else {\n            // Todo mode3\n            return false;\n        }\n\n        var dissolve = op.dissolve || '',\n            gravity = op.gravity || '',\n            dx = op.dx || '',\n            dy = op.dy || '';\n\n        imageUrl += dissolve ? '/dissolve/' + dissolve : '';\n        imageUrl += gravity ? '/gravity/' + gravity : '';\n        imageUrl += dx ? '/dx/' + dx : '';\n        imageUrl += dy ? '/dy/' + dy : '';\n\n        if (key) {\n            imageUrl = this.getUrl(key) + '?' + imageUrl;\n        }\n        return imageUrl;\n    };\n\n    /**\n     * invoke the imageInfo api of Qiniu\n     * @param  {String} key of file\n     * @return {Object} image info\n     */\n    this.imageInfo = function(key) {\n        if (!key) {\n            return false;\n        }\n        var url = this.getUrl(key) + '?imageInfo';\n        var xhr = this.createAjax();\n        var info;\n        var that = this;\n        xhr.open('GET', url, false);\n        xhr.onreadystatechange = function() {\n            if (xhr.readyState === 4 && xhr.status === 200) {\n                info = that.parseJSON(xhr.responseText);\n            }\n        };\n        xhr.send();\n        return info;\n    };\n\n    /**\n     * invoke the exif api of Qiniu\n     * @param  {String} key of file\n     * @return {Object} image exif\n     */\n    this.exif = function(key) {\n        if (!key) {\n            return false;\n        }\n        var url = this.getUrl(key) + '?exif';\n        var xhr = this.createAjax();\n        var info;\n        var that = this;\n        xhr.open('GET', url, false);\n        xhr.onreadystatechange = function() {\n            if (xhr.readyState === 4 && xhr.status === 200) {\n                info = that.parseJSON(xhr.responseText);\n            }\n        };\n        xhr.send();\n        return info;\n    };\n\n    /**\n     * invoke the exif or imageInfo api of Qiniu\n     * according with type param\n     * @param  {String} ['exif'|'imageInfo']type of info\n     * @param  {String} key of file\n     * @return {Object} image exif or info\n     */\n    this.get = function(type, key) {\n        if (!key || !type) {\n            return false;\n        }\n        if (type === 'exif') {\n            return this.exif(key);\n        } else if (type === 'imageInfo') {\n            return this.imageInfo(key);\n        }\n        return false;\n    };\n\n    /**\n     * invoke api of Qiniu like a pipeline\n     * @param  {Array of Object} params of a series api call\n     * each object in array is options of api which name is set as 'fop' property\n     * each api's output will be next api's input\n     * @param  {String} key of file\n     * @return {String|Boolean} url of processed image\n     */\n    this.pipeline = function(arr, key) {\n        var isArray = Object.prototype.toString.call(arr) === '[object Array]';\n        var option, errOp, imageUrl = '';\n        if (isArray) {\n            for (var i = 0, len = arr.length; i < len; i++) {\n                option = arr[i];\n                if (!option.fop) {\n                    return false;\n                }\n                switch (option.fop) {\n                    case 'watermark':\n                        imageUrl += this.watermark(option) + '|';\n                        break;\n                    case 'imageView2':\n                        imageUrl += this.imageView2(option) + '|';\n                        break;\n                    case 'imageMogr2':\n                        imageUrl += this.imageMogr2(option) + '|';\n                        break;\n                    default:\n                        errOp = true;\n                        break;\n                }\n                if (errOp) {\n                    return false;\n                }\n            }\n            if (key) {\n                imageUrl = this.getUrl(key) + '?' + imageUrl;\n                var length = imageUrl.length;\n                if (imageUrl.slice(length - 1) === '|') {\n                    imageUrl = imageUrl.slice(0, length - 1);\n                }\n            }\n            return imageUrl;\n        }\n        return false;\n    };\n}\n\nvar Qiniu = new QiniuJsSDK();\n\nglobal.Qiniu = Qiniu;\n\nglobal.QiniuJsSDK = QiniuJsSDK;\n\n})( window );\n"]}