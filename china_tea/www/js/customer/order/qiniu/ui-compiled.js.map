{"version":3,"sources":["ui.js"],"names":[],"mappings":"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","file":"ui-compiled.js","sourcesContent":["/*global plupload */\r\n/*global qiniu */\r\nfunction FileProgress(file, targetID) {\r\n    this.fileProgressID = file.id;\r\n    this.file = file;\r\n\r\n    this.opacity = 100;\r\n    this.height = 0;\r\n    this.fileProgressWrapper = $('#' + this.fileProgressID);\r\n    if (!this.fileProgressWrapper.length) {\r\n        // <div class=\"progress\">\r\n        //   <div class=\"progress-bar progress-bar-info\" role=\"progressbar\" aria-valuenow=\"20\" aria-valuemin=\"0\" aria-valuemax=\"100\" style=\"width: 20%\">\r\n        //     <span class=\"sr-only\">20% Complete</span>\r\n        //   </div>\r\n        // </div>\r\n\r\n        this.fileProgressWrapper = $('<tr></tr>');\r\n        var Wrappeer = this.fileProgressWrapper;\r\n        Wrappeer.attr('id', this.fileProgressID).addClass('progressContainer');\r\n\r\n        var progressText = $(\"<td/>\");\r\n        progressText.addClass('progressName').text(file.name);\r\n\r\n\r\n        var fileSize = plupload.formatSize(file.size).toUpperCase();\r\n        var progressSize = $(\"<td/>\");\r\n        progressSize.addClass(\"progressFileSize\").text(fileSize);\r\n\r\n        var progressBarTd = $(\"<td/>\");\r\n        var progressBarBox = $(\"<div/>\");\r\n        progressBarBox.addClass('info');\r\n        var progressBarWrapper = $(\"<div/>\");\r\n        progressBarWrapper.addClass(\"progress progress-striped\");\r\n\r\n        var progressBar = $(\"<div/>\");\r\n        progressBar.addClass(\"progress-bar progress-bar-info\")\r\n            .attr('role', 'progressbar')\r\n            .attr('aria-valuemax', 100)\r\n            .attr('aria-valuenow', 0)\r\n            .attr('aria-valuein', 0)\r\n            .width('0%');\r\n\r\n        var progressBarPercent = $('<span class=sr-only />');\r\n        progressBarPercent.text(fileSize);\r\n\r\n        var progressCancel = $('<a href=javascript:; />');\r\n        progressCancel.show().addClass('progressCancel').text('×');\r\n\r\n        progressBar.append(progressBarPercent);\r\n        progressBarWrapper.append(progressBar);\r\n        progressBarBox.append(progressBarWrapper);\r\n        progressBarBox.append(progressCancel);\r\n\r\n        var progressBarStatus = $('<div class=\"status text-center\"/>');\r\n        progressBarBox.append(progressBarStatus);\r\n        progressBarTd.append(progressBarBox);\r\n\r\n        Wrappeer.append(progressText);\r\n        Wrappeer.append(progressSize);\r\n        Wrappeer.append(progressBarTd);\r\n\r\n        $('#' + targetID).append(Wrappeer);\r\n    } else {\r\n        this.reset();\r\n    }\r\n\r\n    this.height = this.fileProgressWrapper.offset().top;\r\n    this.setTimer(null);\r\n}\r\n\r\nFileProgress.prototype.setTimer = function(timer) {\r\n    this.fileProgressWrapper.FP_TIMER = timer;\r\n};\r\n\r\nFileProgress.prototype.getTimer = function(timer) {\r\n    return this.fileProgressWrapper.FP_TIMER || null;\r\n};\r\n\r\nFileProgress.prototype.reset = function() {\r\n    this.fileProgressWrapper.attr('class', \"progressContainer\");\r\n    this.fileProgressWrapper.find('td .progress .progress-bar-info').attr('aria-valuenow', 0).width('0%').find('span').text('');\r\n    this.appear();\r\n};\r\n\r\nFileProgress.prototype.setChunkProgess = function(chunk_size) {\r\n    var chunk_amount = Math.ceil(this.file.size / chunk_size);\r\n    if (chunk_amount === 1) {\r\n        return false;\r\n    }\r\n\r\n    var viewProgess = $('<button class=\"btn btn-default\">查看分块上传进度</button>');\r\n\r\n    var progressBarChunkTr = $('<tr class=\"chunk-status-tr\"><td colspan=3></td></tr>');\r\n    var progressBarChunk = $('<div/>');\r\n    for (var i = 1; i <= chunk_amount; i++) {\r\n        var col = $('<div class=\"col-md-2\"/>');\r\n        var progressBarWrapper = $('<div class=\"progress progress-striped\"></div');\r\n\r\n        var progressBar = $(\"<div/>\");\r\n        progressBar.addClass(\"progress-bar progress-bar-info text-left\")\r\n            .attr('role', 'progressbar')\r\n            .attr('aria-valuemax', 100)\r\n            .attr('aria-valuenow', 0)\r\n            .attr('aria-valuein', 0)\r\n            .width('0%')\r\n            .attr('id', this.file.id + '_' + i)\r\n            .text('');\r\n\r\n        var progressBarStatus = $('<span/>');\r\n        progressBarStatus.addClass('chunk-status').text();\r\n\r\n        progressBarWrapper.append(progressBar);\r\n        progressBarWrapper.append(progressBarStatus);\r\n\r\n        col.append(progressBarWrapper);\r\n        progressBarChunk.append(col);\r\n    }\r\n\r\n    if(!this.fileProgressWrapper.find('td:eq(2) .btn-default').length){\r\n        this.fileProgressWrapper.find('td>div').append(viewProgess);\r\n    }\r\n    progressBarChunkTr.hide().find('td').append(progressBarChunk);\r\n    progressBarChunkTr.insertAfter(this.fileProgressWrapper);\r\n\r\n};\r\n\r\nFileProgress.prototype.setProgress = function(percentage, speed, chunk_size) {\r\n    this.fileProgressWrapper.attr('class', \"progressContainer green\");\r\n\r\n    var file = this.file;\r\n    var uploaded = file.loaded;\r\n\r\n    var size = plupload.formatSize(uploaded).toUpperCase();\r\n    var formatSpeed = plupload.formatSize(speed).toUpperCase();\r\n    var progressbar = this.fileProgressWrapper.find('td .progress').find('.progress-bar-info');\r\n    if (this.fileProgressWrapper.find('.status').text() === '取消上传'){\r\n        return;\r\n    }\r\n    this.fileProgressWrapper.find('.status').text(\"已上传: \" + size + \" 上传速度： \" + formatSpeed + \"/s\");\r\n    percentage = parseInt(percentage, 10);\r\n    if (file.status !== plupload.DONE && percentage === 100) {\r\n        percentage = 99;\r\n    }\r\n\r\n    progressbar.attr('aria-valuenow', percentage).css('width', percentage + '%');\r\n\r\n    if (chunk_size) {\r\n        var chunk_amount = Math.ceil(file.size / chunk_size);\r\n        if (chunk_amount === 1) {\r\n            return false;\r\n        }\r\n        var current_uploading_chunk = Math.ceil(uploaded / chunk_size);\r\n        var pre_chunk, text;\r\n\r\n        for (var index = 0; index < current_uploading_chunk; index++) {\r\n            pre_chunk = $('#' + file.id + \"_\" + index);\r\n            pre_chunk.width('100%').removeClass().addClass('alert-success').attr('aria-valuenow', 100);\r\n            text = \"块\" + index + \"上传进度100%\";\r\n            pre_chunk.next().html(text);\r\n        }\r\n\r\n        var currentProgessBar = $('#' + file.id + \"_\" + current_uploading_chunk);\r\n        var current_chunk_percent;\r\n        if (current_uploading_chunk < chunk_amount) {\r\n            if (uploaded % chunk_size) {\r\n                current_chunk_percent = ((uploaded % chunk_size) / chunk_size * 100).toFixed(2);\r\n            } else {\r\n                current_chunk_percent = 100;\r\n                currentProgessBar.removeClass().addClass('alert-success');\r\n            }\r\n        } else {\r\n            var last_chunk_size = file.size - chunk_size * (chunk_amount - 1);\r\n            var left_file_size = file.size - uploaded;\r\n            if (left_file_size % last_chunk_size) {\r\n                current_chunk_percent = ((uploaded % chunk_size) / last_chunk_size * 100).toFixed(2);\r\n            } else {\r\n                current_chunk_percent = 100;\r\n                currentProgessBar.removeClass().addClass('alert-success');\r\n            }\r\n        }\r\n        currentProgessBar.width(current_chunk_percent + '%');\r\n        currentProgessBar.attr('aria-valuenow', current_chunk_percent);\r\n        text = \"块\" + current_uploading_chunk + \"上传进度\" + current_chunk_percent + '%';\r\n        currentProgessBar.next().html(text);\r\n    }\r\n\r\n    this.appear();\r\n};\r\n\r\nFileProgress.prototype.setComplete = function(up, info, id) {\r\n    var td = this.fileProgressWrapper.find('td:eq(2)'),\r\n        tdProgress = td.find('.progress');\r\n\r\n    var res = $.parseJSON(info);\r\n    var url;\r\n    if (res.url) {\r\n        url = res.url;\r\n        str = \"<div><strong>Link:</strong><a href=\" + res.url + \" target='_blank' > \" + res.url + \"</a></div>\" +\r\n            \"<div class=hash><strong>Hash:</strong>\" + res.hash + \"</div>\";\r\n    } else {\r\n        var domain = up.getOption('domain');\r\n        url = domain + encodeURI(res.key);\r\n        var link = domain + res.key;\r\n        str = \"<div><strong>Link:</strong><a href=\" + url + \" target='_blank' > \" + link + \"</a></div>\" +\r\n            \"<div class=hash><strong>Hash:</strong>\" + res.hash + \"</div>\";\r\n    }\r\n\r\n    tdProgress.html(str).removeClass().next().next('.status').hide();\r\n    td.find('.progressCancel').hide();\r\n\r\n    var progressNameTd = this.fileProgressWrapper.find('.progressName');\r\n    var imageView = '?imageView2/1/w/100/h/100';\r\n    //store\r\n    localStorage.setItem('img_item_'+id, url);\r\n\r\n    var isImage = function(url) {\r\n        var res, suffix = \"\";\r\n        var imageSuffixes = [\"png\", \"jpg\", \"jpeg\", \"gif\", \"bmp\"];\r\n        var suffixMatch = /\\.([a-zA-Z0-9]+)(\\?|\\@|$)/;\r\n\r\n        if (!url || !suffixMatch.test(url)) {\r\n            return false;\r\n        }\r\n        res = suffixMatch.exec(url);\r\n        suffix = res[1].toLowerCase();\r\n        for (var i = 0, l = imageSuffixes.length; i < l; i++) {\r\n            if (suffix === imageSuffixes[i]) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n\r\n    var isImg = isImage(url);\r\n\r\n    var Wrapper = $('<div class=\"Wrapper\"/>');\r\n    var imgWrapper = $('<div class=\"imgWrapper col-md-3\"/>');\r\n    var linkWrapper = $('<a class=\"linkWrapper\" target=\"_blank\"/>');\r\n    var showImg = $('<img src=\"\" style=\"margin-right: 2%;\"/>');\r\n\r\n    progressNameTd.append(Wrapper);\r\n\r\n    if (!isImg) {\r\n        showImg.attr('src', 'images/default.png');\r\n        Wrapper.addClass('default');\r\n\r\n        imgWrapper.append(showImg);\r\n        Wrapper.append(imgWrapper);\r\n    } else {\r\n        //linkWrapper.append(showImg);\r\n        //imgWrapper.append(linkWrapper);\r\n        //Wrapper.append(imgWrapper);\r\n\r\n        var img = new Image();\r\n        if (!/imageView/.test(url)) {\r\n            url += imageView\r\n        }\r\n        $(img).attr('src', url);\r\n\r\n        var height_space = 340;\r\n        $(img).on('load', function() {\r\n            showImg.attr('src', url);\r\n\r\n            linkWrapper.attr('href', url).attr('title', '查看原图');\r\n            //append\r\n            $('.images-list-' + id).append(showImg);\r\n\r\n            function initImg(url, key, height) {\r\n                $('#myModal-img').modal();\r\n                var modalBody = $('#myModal-img').find('.modal-body');\r\n                if (height <= 300) {\r\n                    $('#myModal-img').find('.text-warning').show();\r\n                }\r\n                var newImg = new Image();\r\n                modalBody.find('img').attr('src', 'images/loading.gif');\r\n                newImg.onload = function() {\r\n                    modalBody.find('img').attr('src', url).data('key', key).data('h', height);\r\n                    modalBody.find('.modal-body-wrapper').find('a').attr('href', url);\r\n                };\r\n                newImg.src = url;\r\n            }\r\n\r\n            var infoWrapper = $('<div class=\"infoWrapper col-md-6\"></div>');\r\n\r\n\r\n            var fopLink = $('<a class=\"fopLink\"/>');\r\n            fopLink.attr('data-key', res.key).text('查看处理效果');\r\n            infoWrapper.append(fopLink);\r\n            fopLink.on('click', function() {\r\n                var key = $(this).data('key');\r\n                var height = parseInt($(this).parents('.Wrapper').find('.origin-height').text(), 10);\r\n                if (height > $(window).height() - height_space) {\r\n                    height = parseInt($(window).height() - height_space, 10);\r\n                } else {\r\n                    height = parseInt(height, 10) || 300;\r\n                    //set a default height 300 for ie9-\r\n                }\r\n                var fopArr = [];\r\n                fopArr.push({\r\n                    fop: 'imageView2',\r\n                    mode: 3,\r\n                    h: height,\r\n                    q: 100,\r\n                    format: 'png'\r\n                });\r\n                fopArr.push({\r\n                    fop: 'watermark',\r\n                    mode: 1,\r\n                    image: 'http://www.b1.qiniudn.com/images/logo-2.png',\r\n                    dissolve: 100,\r\n                    gravity: 'SouthEast',\r\n                    dx: 100,\r\n                    dy: 100\r\n                });\r\n                var url = Qiniu.pipeline(fopArr, key);\r\n                $('#myModal-img').on('hide.bs.modal', function() {\r\n                    $('#myModal-img').find('.btn-default').removeClass('disabled');\r\n                    $('#myModal-img').find('.text-warning').hide();\r\n                }).on('show.bs.modal', function() {\r\n                    $('#myModal-img').find('.imageView').find('a:eq(0)').addClass('disabled');\r\n                    $('#myModal-img').find('.watermark').find('a:eq(3)').addClass('disabled');\r\n                    $('#myModal-img').find('.text-warning').hide();\r\n                });\r\n\r\n                initImg(url, key, height);\r\n\r\n                return false;\r\n            });\r\n\r\n        /*    var ie = Qiniu.detectIEVersion();\r\n            if (!(ie && ie <= 9)) {\r\n                var exif = Qiniu.exif(res.key);\r\n                if (exif) {\r\n                    var exifLink = $('<a href=\"\" target=\"_blank\">查看exif</a>');\r\n                    exifLink.attr('href', url + '?exif');\r\n                    infoWrapper.append(exifLink);\r\n                }\r\n\r\n                var imageInfo = Qiniu.imageInfo(res.key);\r\n                var infoArea = $('<div/>');\r\n                var infoInner = '<div>格式：<span class=\"origin-format\">' + imageInfo.format + '</span></div>' +\r\n                    '<div>宽度：<span class=\"orgin-width\">' + imageInfo.width + 'px</span></div>' +\r\n                    '<div>高度：<span class=\"origin-height\">' + imageInfo.height + 'px</span></div>';\r\n                infoArea.html(infoInner);\r\n\r\n                infoWrapper.append(infoArea);\r\n            }*/\r\n\r\n            Wrapper.append(infoWrapper);\r\n\r\n        }).on('error', function() {\r\n            showImg.attr('src', 'default.png');\r\n            Wrapper.addClass('default');\r\n        });\r\n    }\r\n};\r\nFileProgress.prototype.setError = function() {\r\n    this.fileProgressWrapper.find('td:eq(2)').attr('class', 'text-warning');\r\n    this.fileProgressWrapper.find('td:eq(2) .progress').css('width', 0).hide();\r\n    this.fileProgressWrapper.find('button').hide();\r\n    this.fileProgressWrapper.next('.chunk-status-tr').hide();\r\n};\r\n\r\nFileProgress.prototype.setCancelled = function(manual) {\r\n    var progressContainer = 'progressContainer';\r\n    if (!manual) {\r\n        progressContainer += ' red';\r\n    }\r\n    this.fileProgressWrapper.attr('class', progressContainer);\r\n    this.fileProgressWrapper.find('td .progress').remove();\r\n    this.fileProgressWrapper.find('td:eq(2) .btn-default').hide();\r\n    this.fileProgressWrapper.find('td:eq(2) .progressCancel').hide();\r\n};\r\n\r\nFileProgress.prototype.setStatus = function(status, isUploading) {\r\n    if (!isUploading) {\r\n        this.fileProgressWrapper.find('.status').text(status).attr('class', 'status text-left');\r\n    }\r\n};\r\n\r\n// 绑定取消上传事件\r\nFileProgress.prototype.bindUploadCancel = function(up) {\r\n    var self = this;\r\n    if (up) {\r\n        self.fileProgressWrapper.find('td:eq(2) .progressCancel').on('click', function(){\r\n            self.setCancelled(false);\r\n            self.setStatus(\"取消上传\");\r\n            self.fileProgressWrapper.find('.status').css('left', '0');\r\n            up.removeFile(self.file);\r\n        });\r\n    }\r\n\r\n};\r\n\r\nFileProgress.prototype.appear = function() {\r\n    if (this.getTimer() !== null) {\r\n        clearTimeout(this.getTimer());\r\n        this.setTimer(null);\r\n    }\r\n\r\n    if (this.fileProgressWrapper[0].filters) {\r\n        try {\r\n            this.fileProgressWrapper[0].filters.item(\"DXImageTransform.Microsoft.Alpha\").opacity = 100;\r\n        } catch (e) {\r\n            // If it is not set initially, the browser will throw an error.  This will set it if it is not set yet.\r\n            this.fileProgressWrapper.css('filter', \"progid:DXImageTransform.Microsoft.Alpha(opacity=100)\");\r\n        }\r\n    } else {\r\n        this.fileProgressWrapper.css('opacity', 1);\r\n    }\r\n\r\n    this.fileProgressWrapper.css('height', '');\r\n\r\n    this.height = this.fileProgressWrapper.offset().top;\r\n    this.opacity = 100;\r\n    this.fileProgressWrapper.show();\r\n\r\n};\r\n"]}