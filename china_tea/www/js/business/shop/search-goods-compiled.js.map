{"version":3,"sources":["search-goods.js"],"names":[],"mappings":"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","file":"search-goods-compiled.js","sourcesContent":["$(function(){\r\n    //初始化加载元素\r\n    $(\".manager-shop-top-bar\").on(\"click\",\"a\",function () {\r\n        $(\".manager-shop-top-bar\").find(\"a\").removeClass(\"manager-shop-bar-a-active\");\r\n        $(this).addClass(\"manager-shop-bar-a-active\");\r\n    });\r\n    $(\".goods-search-cancel-a\").on(\"click\",function () {\r\n        $(\".my-header-search\").hide();\r\n        $(\"#my-header\").show();\r\n    });\r\n\r\n    $(\".clear-a-text\").on(\"click\",function () {\r\n        $('#goodSearchId').val('');\r\n        business.MangerShop.exchangeBtn();\r\n    });\r\n\r\n    //监听搜索框变化事件,以切换搜索与取消显示\r\n    $('#goodSearchId').bind('input propertychange', function (event) {\r\n        business.MangerShop.exchangeBtn();\r\n    });\r\n    business.MangerShop.init();\r\n});\r\nvar business = business || {};\r\nbusiness.MangerShop={\r\n    pageSize:6, //默认一次加载6条\r\n    pageNum:1,//默认为1\r\n    type:1,//1 出售中，2 已下架商品\r\n    init:function(){\r\n        $(\".my-header-search\").show();\r\n        $(\"#my-header\").hide();\r\n        $('#goodSearchId').val(Util.common.getParameter(\"goodsName\"));\r\n        business.MangerShop.exchangeBtn();\r\n        this.loadList(Util.common.getParameter(\"goodsName\"));\r\n    },\r\n    //初始化加载收藏列表\r\n    loadList:function(goodsName) {\r\n        this.pageNum = 1; //切换tab重新查询\r\n        var url = Util.common.baseUrl + \"/mobile/good/getSearchGoodList.do\";\r\n        var param = {\"goodsName\":goodsName,\"pageSize\":this.pageSize ,\"pageNum\":this.pageNum};\r\n        Util.common.executeAjaxCallback(url ,param,function(data){\r\n            if( data.length>0 ) {\r\n                $(\"#thelist\").html($(\"#list_t\").tmpl(data));\r\n            }else {\r\n                $(\"#thelist\").html('<li><div style=\"text-align: center;\">  <img src=\"imgs/test-img/no-search-result.png\"/></div></li>');\r\n            }\r\n        });\r\n    },\r\n    searchBtn:function(obj) {\r\n        var searchVal = $('#goodSearchId').val();\r\n        this.loadList(searchVal);\r\n    },\r\n    cancelBtn:function(obj){\r\n        //$(\".my-header-search\").hide();\r\n        //$(\"#my-header\").show();\r\n        history.back();\r\n    },\r\n    //跳转到商品详情页面\r\n    toDetails:function(id){\r\n        document.location.href=\"html/business/shop/goods-detail.html?id=\"+id+\"&shopId=\"+Util.common.getParameter(\"shopId\");\r\n    },\r\n    exchangeBtn:function(){\r\n        var searchVal = $('#goodSearchId').val();\r\n        if(Util.string.isEmpty(searchVal)){\r\n            $(\"#submitBtn\").html('<a  class=\"goods-search-cancel-a\" data-role=\"none\" href=\"#\" onclick=\"business.MangerShop.cancelBtn(this)\">取消</a>');\r\n        }else{\r\n            $(\"#submitBtn\").html('<a  class=\"goods-search-cancel-a\" data-role=\"none\" href=\"#\"  onclick=\"business.MangerShop.searchBtn(this)\">搜索</a>');\r\n        }\r\n    }\r\n\r\n}\r\n\r\n//初始化绑定iScroll控件\r\ndocument.addEventListener('touchmove', function (e) { e.preventDefault(); }, false);\r\ndocument.addEventListener('DOMContentLoaded', function(){loaded(\"scroll-list\")}, false);\r\nvar myScroll;\r\n//下拉刷新\r\nfunction pullDownAction () {\r\n    myScroll.refresh();\r\n}\r\n//滚动翻页 （自定义实现此方法）\r\nfunction pullUpAction () {\r\n    var url = Util.common.baseUrl ;\r\n    var url = Util.common.baseUrl + \"/mobile/good/getSearchGoodList.do\";\r\n    var param = {\"shopId\":Util.common.getParameter(\"shopId\"),\"pageSize\":business.MangerShop.pageSize ,\"pageNum\":business.MangerShop.pageNum + 1};\r\n    Util.common.executeAjaxCallback(url, param, function(data){\r\n        if( data.length>0 ) {\r\n            $(\"#thelist\").append($(\"#list_t\").tmpl(data));\r\n            business.MangerShop.pageNum +=  1;\r\n        }else{\r\n\r\n        }\r\n        myScroll.refresh();\r\n    });\r\n}"]}