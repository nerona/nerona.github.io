{"version":3,"sources":["goods-detail.js"],"names":[],"mappings":"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","file":"goods-detail-compiled.js","sourcesContent":["$(function () {\r\n    business.goodsDetail.init();\r\n});\r\n\r\nvar business = business || {};\r\nbusiness.goodsDetail = {\r\n    content: null,\r\n    //初始化加载元素\r\n    init: function () {\r\n        var id = Util.common.getParameter(\"id\");\r\n        var isShared = Util.common.getParameter(\"isShared\");\r\n        if(isShared){\r\n            $('.my-ui-footer-bar').hide();\r\n            $('.goods-share-td').hide();\r\n        }\r\n        this.loadPage(id);\r\n        this.initEvent();\r\n    },\r\n    loadPage: function (id) {\r\n        var url = Util.common.baseUrl + \"/mobile/good/getGoodDetail.do\";\r\n        var param = {\"goodId\": id};\r\n        var that = this;\r\n        Util.common.executeAjaxCallback(url, param, function (data) {\r\n            that.normalize(data);\r\n            that.content = data;\r\n            $(\"#slider-content\").html($(\"#goodsDetail_showImage_t\").tmpl(data.showImages));\r\n            $(\".text-desc-content\").html($(\"#goodsDetail_t\").tmpl(data));\r\n            $(\".goods-img-show-content\").append($(\"#goodsDetail_images_t\").tmpl(data.detailImages.images));\r\n            $(\"#goods-cass-div-box\").html($(\"#goodsDetail_shotType_t\").tmpl(data));\r\n            $(\".my-ui-footer-bar ul\").html($(\"#goodsDetail_shelve_t\").tmpl(data));\r\n\r\n            business.goodsDetail.showLeftTime(data.goodSkuList[0].startTime, data.goodSkuList[0].endTime);\r\n        });\r\n    },\r\n    normalize: function (data) {\r\n        var skuDisplay = [];\r\n        var skuDisplayMap = {};\r\n        var skuTypeList = data.skuTypeList;\r\n        var goodSkuList = data.goodSkuList;\r\n        skuTypeList.forEach(function (item) {\r\n            var obj = {\r\n                type: item.skuName,\r\n                details: []\r\n            };\r\n            skuDisplayMap[item.skuName] = obj.details;\r\n            skuDisplay.push(obj);\r\n        });\r\n        goodSkuList.forEach(function (good) {\r\n            var skuLongs = good.skuLong.split(',');\r\n            skuLongs.forEach(function (item) {\r\n                var arr = item.split('~');\r\n                skuDisplayMap[arr[0]].push(arr[1]);\r\n            });\r\n        });\r\n        data.skuDisplay = skuDisplay;\r\n    },\r\n    //1.1.2.5\t店铺商品上架 0-下架1-上架\r\n    setGoodShelve: function () {\r\n        var url = Util.common.baseUrl + \"/mobile/good/setGoodShelve.do\";\r\n        var param = {\"shopId\": Util.common.getParameter(\"shopId\"), \"goodIds\": Util.common.getParameter(\"id\")};\r\n        Util.common.executeAjaxCallback(url, param, function (data) {\r\n            if (data.code == 0) {\r\n                $(\".my-ui-footer-bar ul\").html($(\"#goodsDetail_shelve_t\").tmpl({\"status\": 1}));\r\n                Util.msg.show(\"successShelveId\", \"商品已经成功上架\", \"imgs/test-img/put-scc-ico.png\");\r\n            } else {\r\n                Util.msg.show(\"successShelveId\", \"商品上架失败\", \"imgs/test-img/put-scc-ico.png\");\r\n            }\r\n        });\r\n    },\r\n    //1.1.2.6\t店铺商品下架\r\n    setGoodOutShelve: function () {\r\n        var url = Util.common.baseUrl + \"/mobile/good/setGoodOutShelve.do\";\r\n        var param = {\"shopId\": Util.common.getParameter(\"shopId\"), \"goodIds\": Util.common.getParameter(\"id\")};\r\n        Util.common.executeAjaxCallback(url, param, function (data) {\r\n            if (data.code == 0) {\r\n                $(\".my-ui-footer-bar ul\").html($(\"#goodsDetail_shelve_t\").tmpl({\"status\": 0}));\r\n                Util.msg.show(\"successOutShelveId\", \"商品已经成功下架\", \"imgs/test-img/put-scc-ico.png\");\r\n            } else {\r\n                Util.msg.show(\"successShelveId\", \"商品下架失败\", \"imgs/test-img/put-scc-ico.png\");\r\n            }\r\n        });\r\n    },\r\n    //计算活动时间\r\n    showLeftTime: function (startTime, endTime) {\r\n        if (!Util.string.isEmpty(startTime) && !Util.string.isEmpty(endTime)) {\r\n            var timeTasker = setInterval(function () {\r\n                if (new Date() < new Date(startTime)) {\r\n                    $(\"#showLeftTime\").html(\"距开始: \" + Util.date.getTimeDiffer(new Date(), new Date(startTime)));\r\n                } else if (new Date() > new Date(startTime) && new Date() < new Date(endTime)) {\r\n                    $(\"#showLeftTime\").html(\"距结束: \" + Util.date.getTimeDiffer(new Date(endTime), new Date()));\r\n                } else {\r\n                    $(\"#showLeftTime\").css(\"color\", \"red\");\r\n                    $(\"#showLeftTime\").css(\"text-shadow\", \"none\");\r\n                    $(\"#showLeftTime\").html(\"已结束\");\r\n                    clearInterval(timeTasker);\r\n                }\r\n            }, 1000);\r\n        }\r\n    },\r\n    //商品详情\r\n    lookGoodsCass: function () {\r\n        $(\"#goods-cass-div-box\").show();\r\n        $(\"body\").css({\"overflow\": \"hidden\"});\r\n    },\r\n    initEvent: function () {\r\n        $(\"#slider-content\").flexslider({\r\n            slideshowSpeed: 4000, //展示时间间隔ms\r\n            animationSpeed: 800, //滚动时间ms\r\n            touch: true, //是否支持触屏滑动\r\n            slideshow: true\r\n        });\r\n        /**\r\n         * 上架提示\r\n         */\r\n        $(\".my-list-view-t\").on(\"change\", \".ext-box-select\", function () {\r\n            var num = $(\".my-list-view-t\").find(\".ext-box-select:checked\").length;\r\n            $(\"#manager-box-btn-all\").next().find(\"em\").html(num);\r\n        });\r\n        /**\r\n         * 商品详情\r\n         */\r\n        $(\"#goods-cass-div-box\").on(\"click\", function (e) {\r\n            var target = $(e.target);\r\n            if (target.closest(\".share-content\").length == 0) {\r\n                $(this).hide();\r\n                $(\"body\").css({\"overflow\": \"visible\"});\r\n            }\r\n        });\r\n    }\r\n}"]}