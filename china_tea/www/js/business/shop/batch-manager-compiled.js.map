{"version":3,"sources":["batch-manager.js"],"names":[],"mappings":"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","file":"batch-manager-compiled.js","sourcesContent":["$(function(){\r\n    //初始化加载元素\r\n    business.batchManger.init();\r\n});\r\nvar business = business || {};\r\nbusiness.batchManger={\r\n    pageSize:6, //默认一次加载6条\r\n    pageNum:1,//默认为1\r\n    type:1,//1 出售中，2 已下架商品\r\n    init:function(){\r\n        this.loadList();\r\n        this.initManagerSubmit();\r\n    },\r\n    //初始化加载收藏列表\r\n    loadList:function() {\r\n        this.pageNum = 1; //切换tab重新查询\r\n        var url = Util.common.baseUrl ;\r\n        if (Util.common.getParameter(\"type\") == 1) {\r\n            url +=  \"/mobile/good/getSaleGoodList.do\";\r\n        }else{\r\n            url +=  \"/mobile/good/getUnshelveGoodList.do\";\r\n        }\r\n        var param = {\"shopId\":Util.common.getParameter(\"shopId\"),\"pageSize\":this.pageSize ,\"pageNum\":this.pageNum};\r\n        Util.common.executeAjaxCallback(url ,param,function(data){\r\n            if( data.length>0 ) {\r\n                $(\"#thelist\").html($(\"#list_t\").tmpl(data));\r\n            }else{\r\n                $(\"#thelist\").html('<li><div class=\"no-goods-notice\">  <img src=\"imgs/test-img/no-goods.png\"/></div></li>');\r\n            }\r\n        });\r\n    },\r\n    initManagerSubmit:function(){\r\n        var liHtml = \"\";\r\n        //1 出售中，2 已下架商品\r\n        if (Util.common.getParameter(\"type\") == 1) {\r\n            liHtml = '<a href=\"#\" class=\"manager-down-a-ico\" onclick=\"business.batchManger.setGoodOutShelve()\"><b>下架</b></a>';\r\n        }else{\r\n            liHtml = '<a href=\"#\" class=\"manager-put-a-ico\" onclick=\"business.batchManger.setGoodShelve()\"><b>上架</b></a>';\r\n        }\r\n        $(\"#managerSubmit\").html(liHtml);\r\n    },\r\n    geCheckedGoodIds:function(){\r\n        //多个商品Id用,隔开\r\n        var arrChk=$(\"input[name='goodId']:checked\");\r\n        var goodIds = \"\";\r\n        $(arrChk).each(function(){\r\n            goodIds += this.value+\",\";\r\n        });\r\n        return goodIds;\r\n    },\r\n    //1.1.2.5\t店铺商品上架 0-下架1-上架\r\n    setGoodShelve:function(){\r\n        var goodIds = this.geCheckedGoodIds();\r\n        if(goodIds == \"\"){\r\n            Util.msg.show(\"successShelveId\",\"您没有选中商品\");\r\n            return ;\r\n        }else{\r\n            goodIds = goodIds.substring(0,goodIds.length-1);\r\n        }\r\n        var url = Util.common.baseUrl + \"/mobile/good/setGoodShelve.do\";\r\n        var param = {\"shopId\": Util.common.getParameter(\"shopId\"),\"goodIds\":goodIds};\r\n        Util.common.executeAjaxCallback(url, param, function (data) {\r\n            if(data.code==0){\r\n                $(\"#manager-box-btn-all\").prop(\"checked\", false);\r\n                business.batchManger.loadList();//重新刷新页面\r\n                myScroll.refresh();\r\n                Util.msg.show(\"successShelveId\",\"商品已经成功上架\",\"imgs/test-img/put-scc-ico.png\");\r\n            }else{\r\n                Util.msg.show(\"successShelveId\",\"商品上架失败\",\"imgs/test-img/put-scc-ico.png\");\r\n            }\r\n        });\r\n    },\r\n    //1.1.2.6\t店铺商品下架\r\n    setGoodOutShelve: function () {\r\n        var goodIds = this.geCheckedGoodIds();\r\n        if(goodIds == \"\"){\r\n            Util.msg.show(\"successShelveId\",\"您没有选中商品\");\r\n            return ;\r\n        }else{\r\n            goodIds = goodIds.substring(0,goodIds.length-1);\r\n        }\r\n        var url = Util.common.baseUrl + \"/mobile/good/setGoodOutShelve.do\";\r\n        var param = {\"shopId\": Util.common.getParameter(\"shopId\"),\"goodIds\":goodIds};\r\n        Util.common.executeAjaxCallback(url, param, function (data) {\r\n            if(data.code==0){\r\n                $(\"#manager-box-btn-all\").prop(\"checked\", false);\r\n                business.batchManger.loadList();//重新刷新页面\r\n                myScroll.refresh();\r\n                Util.msg.show(\"successOutShelveId\",\"商品已经成功下架\",\"imgs/test-img/put-scc-ico.png\");\r\n            }else{\r\n                Util.msg.show(\"successShelveId\",\"商品下架失败\",\"imgs/test-img/put-scc-ico.png\");\r\n            }\r\n        });\r\n    },\r\n    //跳转到商品详情页面\r\n    toDetails:function(id){\r\n        document.location.href=\"html/business/shop/goods-detail.html?id=\"+id+\"&shopId=\"+Util.common.getParameter(\"shopId\");\r\n\r\n    }\r\n}\r\n\r\n//初始化绑定iScroll控件\r\ndocument.addEventListener('touchmove', function (e) { e.preventDefault(); }, false);\r\ndocument.addEventListener('DOMContentLoaded', function(){loaded(\"scroll-list\")}, false);\r\nvar myScroll;\r\n//下拉刷新\r\nfunction pullDownAction () {\r\n    myScroll.refresh();\r\n}\r\n//滚动翻页 （自定义实现此方法）\r\nfunction pullUpAction () {\r\n    var url = Util.common.baseUrl ;\r\n    if (Util.common.getParameter(\"type\") == 1) {\r\n        url +=  \"/mobile/good/getSaleGoodList.do\";\r\n    }else{\r\n        url +=  \"/mobile/good/getUnshelveGoodList.do\";\r\n    }\r\n    var param = {\"shopId\":Util.common.getParameter(\"shopId\"),\"pageSize\":business.batchManger.pageSize ,\"pageNum\":business.batchManger.pageNum + 1};\r\n    Util.common.executeAjaxCallback(url, param, function(data){\r\n        if( data.length>0 ) {\r\n            $(\"#thelist\").append($(\"#list_t\").tmpl(data));\r\n            business.batchManger.pageNum +=  1;\r\n        }else{\r\n            //Util.msg.show(\"msgId\",\"没有更多了\");\r\n        }\r\n        myScroll.refresh();\r\n    });\r\n}"]}