{"version":3,"sources":["my-info.js"],"names":[],"mappings":";;AAAA,EAAE,YAAY;AACV,aAAS,MAAT,CAAgB,IAAhB,GADU;AAEV,MAAE,YAAY;AACV,UAAE,iBAAF,EAAqB,EAArB,CAAwB,OAAxB,EAAiC,YAAY;AACzC,qBAAS,MAAT,CAAgB,WAAhB,GADyC;SAAZ,CAAjC,CADU;KAAZ,CAAF,CAFU;CAAZ,CAAF;AAQA,IAAI,WAAW,YAAY,EAAZ;AACf,SAAS,MAAT,GAAkB;;AAEd,UAAM,gBAAY;;AAEd,YAAI,WAAW,KAAK,KAAL,CAAW,aAAa,OAAb,CAAqB,UAArB,CAAX,CAAX;;AAFU,YAIV,YAAY,IAAZ,EAAkB;AAClB,qBAAS,QAAT,CAAkB,IAAlB,GAAyB,+BAAzB,CADkB;SAAtB;;AAJc,YAQd,CAAK,QAAL,CAAc,QAAd,EARc;KAAZ;AAUN,cAAU,kBAAU,IAAV,EAAgB;AACtB,UAAE,eAAF,EAAmB,IAAnB,CAAwB,EAAE,WAAF,EAAe,IAAf,CAAoB,IAApB,CAAxB,EADsB;KAAhB;AAGV,kBAAc,sBAAU,IAAV,EAAgB,IAAhB,EAAsB;AAChC,YAAI,MAAM,KAAK,MAAL,CAAY,OAAZ,GAAsB,+BAAtB;;AADsB,YAG5B,WAAW,KAAK,KAAL,CAAW,aAAa,OAAb,CAAqB,UAArB,CAAX,CAAX,CAH4B;AAIhC,YAAI,OAAO,gBAAgB,SAAS,GAAT,CAAa,EAAb,GAAkB,KAAlC,GAA0C,IAA1C,GAAiD,KAAjD,GAAyD,IAAzD,GAAgE,IAAhE,CAJqB;AAKhC,YAAI,QAAQ,EAAC,SAAS,IAAT,EAAT,CAL4B;AAMhC,aAAK,MAAL,CAAY,mBAAZ,CAAgC,GAAhC,EAAqC,KAArC,EAA4C,UAAU,IAAV,EAAgB;AACxD,gBAAI,KAAK,IAAL,IAAa,CAAb,EAAgB;AAChB,yBAAS,GAAT,CAAa,IAAb,IAAqB,IAArB,CADgB;AAEhB,6BAAa,OAAb,CAAqB,UAArB,EAAiC,KAAK,SAAL,CAAe,QAAf,CAAjC,EAFgB;aAApB;SADwC,CAA5C,CANgC;KAAtB;AAad,iBAAa,uBAAY;AACrB,YAAI,WAAW,KAAK,KAAL,CAAW,aAAa,OAAb,CAAqB,UAArB,CAAX,CAAX,CADiB;AAErB,YAAI,OAAO,IAAP;;AAFiB,cAIrB,CAAO,UAAP,GAAoB,UAAU,GAAV,EAAe;AAC/B,gBAAI,GAAJ,EAAS;AACL,qBAAK,YAAL,CAAkB,YAAlB,EAA+B,GAA/B,EADK;AAEL,kBAAE,UAAF,EAAc,IAAd,CAAmB,KAAnB,EAA0B,GAA1B,EAFK;aAAT;SADgB,CAJC;AAUrB,aAAK,EAAL,CAAQ,MAAR,CAAe,aAAf,EAA8B,GAA9B,EAAmC,UAAU,GAAV,EAAe;AAC9C,gBAAI,GAAJ,EAAS;AACL,yBAAS,GAAT,CAAa,UAAb,GAA0B,GAA1B,CADK;AAEL,6BAAa,OAAb,CAAqB,UAArB,EAAiC,KAAK,SAAL,CAAe,QAAf,CAAjC,EAFK;AAGL,kBAAE,UAAF,EAAc,IAAd,CAAmB,KAAnB,EAA0B,GAA1B,EAHK;aAAT;SAD+B,CAAnC,CAVqB;KAAZ;CA5BjB","file":"my-info-compiled.js","sourcesContent":["$(function () {\r\n    business.myinfo.init();\r\n    $(function () {\r\n        $(\".my-header-edit\").on(\"click\", function () {\r\n            business.myinfo.headerClick();\r\n        });\r\n    });\r\n});\r\nvar business = business || {};\r\nbusiness.myinfo = {\r\n    //初始化加载元素\r\n    init: function () {\r\n        //var userName = Util.common.getParameter(\"user\");\r\n        var userInfo = JSON.parse(localStorage.getItem(\"userInfo\"));\r\n        //没取到缓存数据，跨回登录页面\r\n        if (userInfo == null) {\r\n            document.location.href = \"html/business/user/login.html\";\r\n        }\r\n        // userInfo.userName = userName;\r\n        this.loadPage(userInfo);\r\n    },\r\n    loadPage: function (data) {\r\n        $(\".my-info-main\").html($(\"#myinfo_t\").tmpl(data));\r\n    },\r\n    saveUserInfo: function (name, text) {\r\n        var url = Util.common.baseUrl + \"/mobile/user/updateUserMsg.do\";\r\n        //var userName = Util.common.getParameter(\"user\");\r\n        var userInfo = JSON.parse(localStorage.getItem('userInfo'));\r\n        var data = '{\"shopId\":\"' + userInfo.msg.id + '\",\"' + name + '\":\"' + text + '\"}';\r\n        var param = {\"param\": data};\r\n        Util.common.executeAjaxCallback(url, param, function (data) {\r\n            if (data.code == 0) {\r\n                userInfo.msg[name] = text;\r\n                localStorage.setItem('userInfo', JSON.stringify(userInfo));\r\n            }\r\n        })\r\n    },\r\n    headerClick: function () {\r\n        var userInfo = JSON.parse(localStorage.getItem('userInfo'));\r\n        var that = this;\r\n        //1：头像，2：活动\r\n        window.setHeadImg = function (url) {\r\n            if (url) {\r\n                that.saveUserInfo('headImgUrl',url);\r\n                $('#headImg').attr('src', url);\r\n            }\r\n        };\r\n        Util.na.invoke('imageChoose', '1', function (url) {\r\n            if (url) {\r\n                userInfo.msg.headImgUrl = url;\r\n                localStorage.setItem('userInfo', JSON.stringify(userInfo));\r\n                $('#headImg').attr('src', url);\r\n            }\r\n        });\r\n    }\r\n};"]}