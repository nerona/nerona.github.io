{"version":3,"sources":["publish-activity.js"],"names":[],"mappings":"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","file":"publish-activity-compiled.js","sourcesContent":["$(function () {\r\n    //初始化加载元素\r\n    business.activity.init();\r\n\r\n});\r\nvar business = business || {};\r\nbusiness.activity = {\r\n    isEditing: false,\r\n    imgs: [],\r\n    init: function () {\r\n        this.loadPage();\r\n        this.loadDetails();\r\n    },\r\n    loadPage: function () {\r\n        var url = Util.common.baseUrl + \"/event/activityType/mobile/findEventActivityTypeListForMobile.do\";\r\n        var param = {};\r\n        Util.common.executeAjaxCallback(url, param, function (data) {\r\n            var datas = {\"datas\": data};\r\n            $(\"#activityTypeId\").html($(\"#activityType_t\").tmpl(datas));\r\n        });\r\n    },\r\n    loadDetails: function () {\r\n        var id = Util.common.getParameter(\"id\");\r\n        var that = this;\r\n        if (id) {\r\n            this.isEditing = true;\r\n            $(\"textarea[name=title]\").attr('disabled', true);\r\n            $('#fabu').text('保存');\r\n            var url = Util.common.baseUrl + \"/event/eventActivity/mobile/findEventActivityByIdForMobile.do\";\r\n            var param = {\"id\": Util.common.getParameter(\"id\")};\r\n            Util.common.executeAjaxCallback(url, param, function (activityModel) {\r\n                $('#activityType' + activityModel.activityTypeId).attr('checked', true);\r\n                $(\"textarea[name=title]\").val(activityModel.title);\r\n                $(\"input[name=sponsorTel]\").val(activityModel.sponsorTel);\r\n                //beginTime\t活动开始时间\r\n                $(\"input[name=beginTime]\").val(activityModel.beginTime);\r\n                //endTime\t活动结束时间\r\n                $(\"input[name=endTime]\").val(activityModel.endTime);\r\n                //regEndTime\t报名结束时间\r\n                $(\"input[name=regEndTime]\").val(activityModel.regEndTime);\r\n                //numberLimit\t人数限制\r\n                $(\"input[name=numberLimit]\").val(activityModel.numberLimit);\r\n                $(\"input[name=activityAddress]\").val(activityModel.activityAddress);\r\n                $(\"textarea[name=content]\").val(activityModel.content);\r\n                that.imgs = activityModel.image.map(function (item) {\r\n                    return {\r\n                        url: item.picUrl\r\n                    }\r\n                });\r\n                that.setImgs(that.imgs);\r\n            });\r\n        }\r\n    },\r\n    subimtBtn: function () {\r\n        var activityModel = {};\r\n        var userInfo = JSON.parse(localStorage.getItem(\"userInfo\")).msg;\r\n        var id = Util.common.getParameter(\"id\");\r\n        if (id) {\r\n            activityModel.id = id;\r\n        }\r\n        //活动分类ID\r\n        activityModel.activityTypeId = $(\"input[name=activityType]:checked\").val();\r\n        //活动部落名称\r\n        // var activityTypeName = $(\"input[name=activityType]:checked+label\").html();\r\n        //  activityModel.activityTypeName = activityTypeName;\r\n        //type\t类型\r\n        activityModel.type = '1';\r\n        activityModel.subbranchId = userInfo.id;\r\n        //typeName\t类型名称\r\n        //activityModel.typeName = '户外';\r\n        //标题\r\n        activityModel.title = $(\"textarea[name=title]\").val();\r\n        //sponsorName\t主办方名称\r\n        activityModel.sponsorName = userInfo.name;\r\n        //sponsorTel\t主办方联系方式\r\n        activityModel.sponsorTel = $(\"input[name=sponsorTel]\").val();\r\n        //beginTime\t活动开始时间\r\n        var beginTime = $(\"input[name=beginTime]\").val() + ':00';\r\n        activityModel.beginTime = beginTime;\r\n        //endTime\t活动结束时间\r\n        activityModel.endTime = $(\"input[name=endTime]\").val() + ':00';\r\n        //regStartTime\t报名开始时间\r\n        activityModel.regStartTime = beginTime;\r\n        //regEndTime\t报名结束时间\r\n        activityModel.regEndTime = $(\"input[name=regEndTime]\").val() + ':00';\r\n        //numberLimit\t人数限制\r\n        activityModel.numberLimit = $(\"input[name=numberLimit]\").val();\r\n        //activityStatus\t活动状态\r\n        //s   var activityStatus = 0;\r\n        //   activityModel.activityStatus = activityStatus;\r\n        //activityStatusName\t活动状态名称\r\n        //   activityModel.activityStatusName = '待审核';\r\n        //statusName\t状态名称\r\n        //    activityModel.statusName = '待审核';\r\n        //activityPic\t图片ID\r\n        activityModel.activityPic = this.imgs;\r\n        //图片组\r\n        //activityAddress\t活动地址\r\n        activityModel.activityAddress = $(\"input[name=activityAddress]\").val();\r\n        //activityLongitude\t活动经度\r\n        //activityModel.activityLongitude = '1';\r\n        //activityLatitude\t活动纬度\r\n        //activityModel.activityLatitude = '1';\r\n        //activityModel.activityLoLa = '117.227194,24.71772';\r\n        //createAddress\t创建地址\r\n        //activityModel.createAddress = '1';\r\n        //createLongitude\t创建经度\r\n        //activityModel.createLongitude = '1';\r\n        //createLatitude\t创建纬度\r\n        //activityModel.createLatitude = '1';\r\n        //content\t介绍\r\n        activityModel.content = $(\"textarea[name=content]\").val();\r\n        //participation\t报名人数\r\n        //activityModel.participation = '1';\r\n        var url = Util.common.baseUrl + \"/event/eventActivity/mobile/saveForMobile.do\";\r\n        var param = {\"modelJson\": JSON.stringify(activityModel)};\r\n        Util.common.executeAjaxCallback(url, param, function (data) {\r\n            if (data.success == true) {\r\n                history.back();\r\n            } else {\r\n                Util.msg.show(\"msgId\", data.msg);\r\n            }\r\n        });\r\n    },\r\n    setImgs: function (imgs) {\r\n        $('#activityImgs').html($(\"#activity_imgs\").tmpl(imgs));\r\n    },\r\n    chooseImage: function () {\r\n        var imgs = this.imgs;\r\n        var that = this;\r\n        window.setHeadImg = function (url) {\r\n            if (url) {\r\n                imgs.push({\r\n                    url: url\r\n                });\r\n                that.setImgs(imgs);\r\n            }\r\n        };\r\n        Util.na.invoke('imageChoose', '1', function (url) {\r\n            if (url) {\r\n                imgs.push({\r\n                    url: url\r\n                });\r\n                that.setImgs(imgs);\r\n            }\r\n        });\r\n    }\r\n};\r\n"]}