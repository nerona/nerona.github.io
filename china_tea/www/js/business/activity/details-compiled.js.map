{"version":3,"sources":["details.js"],"names":[],"mappings":"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","file":"details-compiled.js","sourcesContent":["$(function () {\r\n    //初始化加载元素\r\n    business.activityDetails.init();\r\n\r\n});\r\n\r\nvar business = business || {};\r\nbusiness.activityDetails = {\r\n    start: 0,\r\n    limit: 6,\r\n    content: null,\r\n    init: function () {\r\n        var isShared = Util.common.getParameter(\"isShared\");\r\n        if (isShared) {\r\n            $('#register').show();\r\n        }\r\n        this.loadDetails();\r\n        this.loadComment();\r\n\r\n    },\r\n    //初始化加载\r\n    loadDetails: function () {\r\n        var url = Util.common.baseUrl + \"/event/eventActivity/mobile/findEventActivityByIdForMobile.do\";\r\n        var param = {\"id\": Util.common.getParameter(\"id\")};\r\n        var canEdit = Util.common.getParameter(\"canEdit\");\r\n        var that = this;\r\n        Util.common.executeAjaxCallback(url, param, function (data) {\r\n            if (canEdit) {\r\n                data.canEdit = true;\r\n            }\r\n            that.content = data;\r\n            $(\"#detailsId\").html($(\"#activity_details_t\").tmpl(data));\r\n            $(\"#slider-content .slides\").html($(\"#activity_images_t\").tmpl(data));\r\n            $(\"#slider-content\").flexslider({\r\n                slideshowSpeed: 4000, //展示时间间隔ms\r\n                animationSpeed: 800, //滚动时间ms\r\n                height: 100,\r\n                touch: true, //是否支持触屏滑动\r\n                slideshow: true\r\n            });\r\n        });\r\n    },\r\n    loadComment: function () {\r\n        var url = Util.common.baseUrl + \"/event/eventActivityComment/weixin/eventActivityCommentPage.do\";\r\n        var param = {\r\n            \"conditionStr\": '{\"eventActivityId\":' + Util.common.getParameter(\"id\") + '}',\r\n            \"start\": this.start,\r\n            \"limit\": this.limit\r\n        };\r\n        Util.common.executeAjaxCallback(url, param, function (data) {\r\n            if (data && data.resultList) {\r\n                data.resultList.forEach(function (item) {\r\n                    item.createTime = item.createTime ? item.createTime.slice(0, 10) : '';\r\n                });\r\n                $(\"#commentId\").html($(\"#activity_comment_t\").tmpl(data.resultList));\r\n            }\r\n        });\r\n    },\r\n    showMap: function (address) {\r\n        document.location.href = 'html/business/activity/activity-map.html?address=' + address;\r\n    },\r\n    register: function () {\r\n        var model = {};\r\n        var url = Util.common.baseUrl + \"/event/eventActivitySignUp/weixin/signUp.do\";\r\n        model.eventActivityId = this.content.id;\r\n        model.tel = $(\"#public_comment_text\").val();\r\n        model.eventActivityUserinfo =Util.common.getParameter(\"userId\") || '';\r\n        var param = {\"modelJson\": JSON.stringify(model)};\r\n        Util.common.executeAjaxCallback(url, param, function (data) {\r\n            if (data.success == true) {\r\n                Util.msg.show(\"msgId\", '报名成功');\r\n            }else{\r\n                Util.msg.show(\"msgId\", data.msg);\r\n            }\r\n        });\r\n    },\r\n    publishComment: function () {\r\n        var userInfo = JSON.parse(localStorage.getItem(\"userInfo\"));\r\n        //console.log(userInfo);\r\n        var userId = userInfo.msg.id;\r\n        var model = {};\r\n        model.userId = userId;\r\n        model.content = $(\"#public_comment_text\").val();\r\n        model.activityId = $(\"#bm_activity_id\").val();\r\n        var url = Util.common.baseUrl + \"/event/eventActivityPoint/weixin/comment.do\";\r\n        var param = {\"modelJson\": JSON.stringify(model)};\r\n        Util.common.executeAjaxCallback(url, param, function (data) {\r\n            Util.msg.show(\"msgId\", data.msg);\r\n            if (data.success == true) {\r\n\r\n            }\r\n        });\r\n    }\r\n}\r\n"]}