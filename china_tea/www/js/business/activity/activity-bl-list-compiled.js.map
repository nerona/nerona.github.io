{"version":3,"sources":["activity-bl-list.js"],"names":[],"mappings":"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","file":"activity-bl-list-compiled.js","sourcesContent":["$(function () {\r\n    //初始化加载元素\r\n    business.activityList.init();\r\n});\r\nvar business = business || {};\r\nbusiness.activityList = {\r\n    limit: 6, //默认一次加载6条\r\n    start: 0,//默认为1\r\n    activityStatus: '1',\r\n    init: function () {\r\n        this.loadList();\r\n    },\r\n    //初始化加载收藏列表\r\n    loadList: function (param) {\r\n        var url = Util.common.baseUrl + \"/event/eventActivity/mobile/findEventActivityForMobile.do\";\r\n        var conditionStr = {\"activityStatus\": this.activityStatus};\r\n        param = param || {\"start\": this.start, \"limit\": this.limit};\r\n        var id = Util.common.getParameter(\"id\");\r\n        if (id) {\r\n            conditionStr.subbranchId = id;\r\n        }\r\n        param.conditionStr = JSON.stringify(conditionStr);\r\n        this.executeAjax(url, param, \"#thelist\", \"#activity_list_t\");\r\n    },\r\n    executeAjax: function (url, param, render, templateId) {\r\n        Util.common.executeAjaxCallback(url, param, function (data) {\r\n            if (data.resultList.length > 0) {\r\n                $(render).html($(templateId).tmpl(data));\r\n            } else {\r\n                $(\"#thelist\").html('<li><div style=\"text-align: center;color:  #999999;margin-top: 8rem;\"> 没有数据了</div></li>');\r\n            }\r\n        });\r\n    },\r\n    queryByActivityStatus: function (status) {\r\n        this.activityStatus = status;\r\n        this.loadList();\r\n    },\r\n    showMap: function (longitude, latitude) {\r\n        alert(longitude + \",\" + latitude);\r\n    },\r\n    toDetails: function (id, canEdit) {\r\n        var href = 'html/business/activity/details.html?id=' + id + \"&user=\" + Util.common.getParameter(\"user\");\r\n        if (canEdit) {\r\n            href = href + '&canEdit=true';\r\n        }\r\n        document.location.href = href;\r\n    },\r\n    showDelDialog: function (id) {\r\n        var that = this;\r\n        $(\"#my-activity-del-show\").popup(\"open\");\r\n        this.del = function () {\r\n            that._del(id);\r\n        }\r\n    },\r\n    closeDelDialog: function () {\r\n        $(\"#my-activity-del-show\").popup(\"close\");\r\n    },\r\n    del: function () {\r\n\r\n    },\r\n    _del: function (id) {\r\n        var url = Util.common.baseUrl + '/event/eventActivity/mobile/delete.do';\r\n        var param = {ids: id.toString()};\r\n        var that = this;\r\n        Util.common.executeAjaxCallback(url, param, function (data) {\r\n            if (data.success == true) {\r\n                that.closeDelDialog();\r\n                that.loadList();\r\n            } else {\r\n                Util.msg.show(\"msgId\", data.msg);\r\n            }\r\n        });\r\n    }\r\n};\r\nbusiness.clickLike = function (id) {\r\n    var url = Util.common.baseUrl + '/event/eventActivityPoint/weixin/point.do';\r\n    var clickLikes = \"click_lick_\" + id;\r\n    var type = $(\"#\" + clickLikes).attr(\"types\");\r\n    if (type == '0') {\r\n        $(\"#\" + clickLikes).addClass(\"activity-dz-num-active\");\r\n        $(\"#\" + clickLikes).attr(\"types\", '1');\r\n    } else {\r\n        $(\"#\" + clickLikes).removeClass(\"activity-dz-num-active\");\r\n        $(\"#\" + clickLikes).attr(\"types\", '0');\r\n        url = Util.common.baseUrl + '/event/eventActivityPoint/weixin/cancelPoint.do';\r\n    }\r\n    var userInfo = JSON.parse(localStorage.getItem(\"userInfo\"));\r\n    //console.log(userInfo);\r\n    var userId = userInfo.msg.id;\r\n    var param = {\"modelJson\": JSON.stringify({\"eventActivityId\": id, \"eventActivityUserinfo\": userId})};\r\n    Util.common.executeAjaxCallback(url, param, function (data) {\r\n        Util.msg.show(\"msgId\", data.msg);\r\n        if (data.success == true) {\r\n            history.back();\r\n        }\r\n    });\r\n};\r\n\r\n//初始化绑定iScroll控件\r\ndocument.addEventListener('touchmove', function (e) {\r\n    e.preventDefault();\r\n}, false);\r\ndocument.addEventListener('DOMContentLoaded', function () {\r\n    loaded(\"activityList\")\r\n}, false);\r\nvar myScroll;\r\n//下拉刷新\r\nfunction pullDownAction() {\r\n    myScroll.refresh();\r\n}\r\n//滚动翻页 （自定义实现此方法）\r\nfunction pullUpAction() {\r\n    var url = Util.common.baseUrl + \"/event/eventActivity/mobile/findEventActivityForMobile.do\";\r\n    var start = business.activityList.start + business.activityList.limit;\r\n    var conditionStr = {\"activityStatus\": business.activityList.activityStatus};\r\n    var param = {\r\n        \"start\": business.activityList.start + business.activityList.limit,\r\n        \"limit\": business.activityList.limit\r\n    };\r\n    var id = Util.common.getParameter(\"id\");\r\n    if (id) {\r\n        conditionStr.subbranchId = id;\r\n    }\r\n    param.conditionStr = JSON.stringify(conditionStr);\r\n    Util.common.executeAjaxCallback(url, param, function (data) {\r\n        if (data.resultList.length > 0) {\r\n            $('#thelist').append($('#activity_list_t').tmpl(data));\r\n            business.activityList.start = start;\r\n        }\r\n        myScroll.refresh();\t\t//调用刷新页面myScroll.refresh();\r\n    });\r\n}"]}